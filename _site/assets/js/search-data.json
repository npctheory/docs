{"0": {
    "doc": "1. Список и история бранчхедов",
    "title": "1. Список и история бранчхедов",
    "content": "Вывести список бранчхедов с номерами коммитов git branch -v . cat .git/refs/heads/master Показать номер коммита, на котором вершина master . История перемещений бранчхеда git reflot история перемещений HEAD git reflog master Вывести историю перемещений вершины master git reflog --date=iso с другим форматом даты . Время жизни логов . gc.reflogExpire gc.reflogExpireUnreachableЦ . Список бранчхедов отсортированных по новизне последнего коммита how-can-i-get-a-list-of-git-branches-ordered-by-most-recent-commit . ",
    "url": "/pages/Git%20Branching/1.%20Branch%20head%20list%20and%20history.html",
    "relUrl": "/pages/Git%20Branching/1.%20Branch%20head%20list%20and%20history.html"
  },"1": {
    "doc": "DemoAppMvc",
    "title": "DemoAppMvc",
    "content": "Новый репозиторий . git init git add . git commit -m \"init\" git remote add origin https://github.com/aq-coding/DemoAppMvc.git git push -u origin master . Новая ветка . git checkout -b dev git add . git commit -m \"init\" git push origin dev . ",
    "url": "/leftmenu/1.%20DemoAppMvc.html",
    "relUrl": "/leftmenu/1.%20DemoAppMvc.html"
  },"2": {
    "doc": "1. Docker Tim Corey",
    "title": "1. Docker Tim Corey",
    "content": "Создать index.md В той же папке создать Dockerfile . # COPY ./html/ Скопировать всё из папки html и имидж, в папку /usr/local/apache2/htdocs/ FROM httpd:alpine COPY ./html/ /usr/local/apache2/htdocs/ . имидж - это ридонли билд docker build -t hello-docker:1.0.0 . Из dockerfile рабочей директории создать имидж с именем hello-docker и тегом 1.0.0 -t или --tag нейм и тэг для имиджа в формате name:tage docker image history e2e4 лог процесса билда имиджа по шагам. Выполнить после docker build . docker run --name first-container -p 8080:80 запустить контейнер 8080 внутри - 80 внутри docker stop e2e4 остановить контейнер docker rm e2e4 удалить контейнер . После изменения в файлах надо создавать новый имидж. Можно оставить название и поменять версию. docker build -t hello-docker:1.0.1 . docker run -d --name first-container -p 8081:80 hello-docker:1.0.0 docker run -d --name second-container -p 8080:80 hello-docker:1.0.1 . RabbitMQ . docker run -d --hostname my-rabbit --name some-rabbit -p 8080:15672 rabbitmq:3-management -d disconnected --hostname нужно для rabbitmq --name имя контейнера -p 8080 снаружи для порта 15672 внутри :3-management имидж с rabbitmq и менеджмент-интерфейсом . Логин: guest Пароль: guest . Скачать имидж mysql не создавай контейнер . docker pull mysql . ",
    "url": "/pages/Docker/grand_children/1.%20DockerTimcorey.html",
    "relUrl": "/pages/Docker/grand_children/1.%20DockerTimcorey.html"
  },"3": {
    "doc": "1. Github создание репозитория",
    "title": "1. Github создание репозитория",
    "content": "Новый репозиторий на Github . New Repository, Create Repository на Github Initialize with Readme.md . Получить доступ к существующему репозиторию . Репозиторий должен быть в списке моих репозиториев в веб-интерфейсе гитхаба. Clone or download, Clone with https git clone https://....git . ",
    "url": "/pages/DemoAppMvc/1.%20Github.html",
    "relUrl": "/pages/DemoAppMvc/1.%20Github.html"
  },"4": {
    "doc": "1. Просмотреть всё дерево коммитов",
    "title": "1. Просмотреть всё дерево коммитов",
    "content": "Вывести дерево коммитов git log Показать все коммиты от HEAD вниз git log master Показать все коммиты от вершины master вниз git log --oneline номер, ветка, заголовок git log --follow index.html все коммиты, где менялся index.html git log --no-decorate Не показывать бранчхеды и HEAD git log --pretty=format:'%h %cd | %s%d [%an]' &lt;id коммита&gt; &lt;дата&gt; | &lt;заголовок&gt; &lt;декорирование(ссылки)&gt; [имя автора] . git log --pretty=format:'%C(yellow)%h %C(dim green)%ad %C(reset)| %C(cyan)%s%d %C(#667788)[%an]' --date=format:'%F %R' . Алиасы для красивого git log Алиас git lg git config --global alias.lg 'log --pretty=format:'%C(yellow)%h %C(dim green)%ad %C(reset)| %C(cyan)%s%d %C(#667788)[%an]' --date=format:'%F %R' Вывести список коммитов ниже указанного коммита или бранчхеда git log master вывести все коммиты от корня до бранчхеда мастер git log master feature вывести все коммиты от корня до бранчхедов feautre и master . Вывести списка коммитов с regex-фильтром git log --grep добавил найти коммиты со словом ‘добавил’ git log --grep добавил -i отключить регистрозависимость git log --grep добавил --grep удалил найти коммиты, где в мессадже есть или слово ‘добавил’ или слово ‘удалил’ git log --grep добавил --grep удалил --all-match найти коммиты, которые матчатся с обоими выражениями . Поиск по изменениям в файлах документация git log -G\"регулярноевыражения\" -p git log -L . Включить перловые regex . git config --global grep.patternType perl . История изменений внутри файла между строчками regex1 и regex2: Git Log -L git log -L '/&lt;head&gt;/','&lt;\\/head&gt;/':index.html история изменений внутри тега head в index.html . Вывести историю движения ветки git log --oneline -g показывает движения веток и HEAD он же git reflog show . Вывести автора изменения между строчками x и y git blame index.html -L x,y . Показать данные об одном коммите git show @~ один коммит назад git show master~ . Найти коммит со словом в описании git show :/sayBye . Список коммитов от коммита xxxx до HEAD how-to-list-commits-since-certain-commit . Список коммитов одного пользователя how-can-i-view-a-git-log-of-just-one-users-commits . Красивый графы pretty-git-branch-graphs . nano ~/.gitconfig . [alias] lg1 = log --graph --abbrev-commit --decorate --format=format:'%C(bold blue)%h%C(reset) - %C(bold green)(%ar)%C(reset) %C(white)%s%C(reset) %C(dim white)- %an%C(reset)%C(bold yellow)%d%C(reset)' --all lg2 = log --graph --abbrev-commit --decorate --format=format:'%C(bold blue)%h%C(reset) - %C(bold cyan)%aD%C(reset) %C(bold green)(%ar)%C(reset)%C(bold yellow)%d%C(reset)%n'' %C(white)%s%C(reset) %C(dim white)- %an%C(reset)' --all lg = !\"git lg1\" ",
    "url": "/pages/Git/1.%20List%20all%20commits.html",
    "relUrl": "/pages/Git/1.%20List%20all%20commits.html"
  },"5": {
    "doc": "1. VS Code",
    "title": "1. VS Code",
    "content": "Глобально установить расширения VS Code Настройка расширения Omnisharp . | Enable/disable default C# formatter. Alt+Shift+F Автоформатированние | Csharp &gt; References Code Lens: Filtered Symbols | OmniSharp: Use Modern Net | . code --install-extension adrianwilczynski.user-secrets code --install-extension ms-dotnettools.csharp code --install-extension k--kato.docomment code --install-extension streetsidesoftware.code-spell-checker code --install-extension EditorConfig.EditorConfig code --install-extension ritwickdey.LiveServer code --install-extension christian-kohler.path-intellisense code --install-extension vscode-icons-team.vscode-icons code --install-extension redhat.vscode-yaml code --install-extension mhutchie.git-graph code --install extension donjayamanne.githistory code --install extension redhat.vscode-yaml . ",
    "url": "/pages/DemoAppRT/1.%20VS%20Code.html",
    "relUrl": "/pages/DemoAppRT/1.%20VS%20Code.html"
  },"6": {
    "doc": "10. HomeController",
    "title": "10. HomeController",
    "content": "wwwroot/images/noimage.jpg ViewModels/HomeDetailsViewModel.cs Controllers/HomeController.cs Views/Home/Create.cshtml Views/Home/Details.cshtml Views/Home/Index.cshtml . wwwroot/images/noimage.jpg . wwwroot/images/noimage.jpg . ViewModels/HomeDetailsViewModel.cs . public class HomeDetailsViewModel { public Employee Employee { get; set; } public string PageTitle { get; set; } } . Controllers/HomeController.cs . using Microsoft.AspNetCore.Mvc; public class HomeController : Controller { private readonly IEmployeeRepository _employeeRepository; public HomeController(IEmployeeRepository employeeRepository) { _employeeRepository = employeeRepository; } public ViewResult Index() { var model = _employeeRepository.GetAllEmployees(); return View(model); } public ViewResult Details(int? id) { HomeDetailsViewModel homeDetailsViewModel = new HomeDetailsViewModel() { Employee = _employeeRepository.GetEmployee(id??1), PageTitle = \"Employee Details\" }; return View(homeDetailsViewModel); } [HttpGet] public ViewResult Create() { return View(); } [HttpPost] public IActionResult Create(Employee employee) { if (ModelState.IsValid) { Employee newEmployee = _employeeRepository.Add(employee); return RedirectToAction(\"details\", new { id = newEmployee.Id }); } return View(); } } . Views/Home/Create.cshtml . @model Employee @inject IEmployeeRepository _empRepository @{ ViewBag.Title = \"Create Employee\"; } &lt;form asp-controller=\"Home\" asp-action=\"Create\" method=\"post\"&gt; &lt;div class=\"mb-3\"&gt; &lt;label asp-for=\"Name\" class=\"form-label\"&gt;&lt;/label&gt; &lt;input asp-for=\"Name\" class=\"form-control\" /&gt; &lt;span asp-validation-for=\"Name\" class=\"text-danger\"&gt;&lt;/span&gt; &lt;/div&gt; &lt;div class=\"mb-3\"&gt; &lt;label asp-for=\"Email\" class=\"form-label\"&gt;&lt;/label&gt; &lt;input asp-for=\"Email\" class=\"form-control\" /&gt; &lt;span asp-validation-for=\"Email\" class=\"text-danger\"&gt;&lt;/span&gt; &lt;/div&gt; &lt;div class=\"mb-3\"&gt; &lt;label asp-for=\"Departament\" class=\"form-label\"&gt;&lt;/label&gt; &lt;select asp-for=\"Departament\" asp-items=\"Html.GetEnumSelectList&lt;Dept&gt;()\" class=\"form-control\"&gt; &lt;option value=\"\"&gt;Please select departament&lt;/option&gt; &lt;/select&gt; &lt;span asp-validation-for=\"Departament\"&gt;&lt;/span&gt; &lt;/div&gt; &lt;div asp-validation-summary=\"All\" class=\"text-danger\"&gt;&lt;/div&gt; &lt;div class=\"row\"&gt; &lt;div class=\"col-sm-10\"&gt; &lt;button type=\"submit\" class=\"btn btn-primary\"&gt;Create&lt;/button&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"row\"&gt; &lt;div class=\"col-sm-10\"&gt; Total Employees Count = @_empRepository.GetAllEmployees().Count() &lt;/div&gt; &lt;/div&gt; &lt;/form&gt; . Views/Home/Details.cshtml . @model HomeDetailsViewModel @{ ViewBag.Title = \"Employee Details\"; } &lt;div class=\"row justify-content-center m-3\"&gt; &lt;div class=\"col-sm-8\"&gt; &lt;div class=\"card\"&gt; &lt;div class=\"card-header\"&gt; &lt;h1&gt;@Model.Employee.Name&lt;/h1&gt; &lt;/div&gt; &lt;div class=\"card-body text-center\"&gt; &lt;img class=\"card-img-top\" src=\"~/images/noimage.jpg\" /&gt; &lt;h4&gt;Employee ID : @Model.Employee.Id&lt;/h4&gt; &lt;h4&gt;Email : @Model.Employee.Email&lt;/h4&gt; &lt;h4&gt;Departament : @Model.Employee.Departament&lt;/h4&gt; &lt;/div&gt; &lt;div class=\"card-footer text-center\"&gt; &lt;a asp-controller=\"home\" asp-action=\"index\" class=\"btn btn-primary\"&gt;Back&lt;/a&gt; &lt;a href=\"#\" class=\"btn btn-primary\"&gt;Edit&lt;/a&gt; &lt;a href=\"#\" class=\"btn btn-danger\"&gt;Delete&lt;/a&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; . Views/Home/Index.cshtml . @model IEnumerable&lt;Employee&gt; @{ ViewBag.Title = \"Employee List\"; } &lt;div class=\"row row-cols-1 row-cols-md-3 g-4 mt-3\"&gt; @foreach (var employee in Model) { &lt;div class=\"col\"&gt; &lt;div class=\"card\"&gt; &lt;div class=\"card-header\"&gt; &lt;h5 class=\"card-title\"&gt;@employee.Name&lt;/h5&gt; &lt;/div&gt; &lt;img class=\"card-img-top\" src=\"~/images/noimage.jpg\" asp-append-version=true /&gt; &lt;div class=\"card-footer text-center\"&gt; &lt;a asp-controller=\"home\" asp-action=\"details\" asp-route-id=\"@employee.Id\" class=\"btn btn-primary m-1\"&gt;View&lt;/a&gt; &lt;a href=\"#\" class=\"btn btn-primary m-1\"&gt;Edit&lt;/a&gt; &lt;a href=\"#\" class=\"btn btn-danger m-1\"&gt;Delete&lt;/a&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; } &lt;/div&gt; . ",
    "url": "/pages/DemoAppMvc/10.%20HomeController.html",
    "relUrl": "/pages/DemoAppMvc/10.%20HomeController.html"
  },"7": {
    "doc": "10. Мердж",
    "title": "10. Мердж",
    "content": "Fast-Forward . git merge fix Если ветка fix выше чем ветка ‘master’, на которой стоит HEAD - подвинет master вместе с HEAD на коммит fix. fix не удаляется. Дальше можно переместить HEAD на fix через git checkout fix . cat .git/ORIG_HEAD покажет id предыдущего положения HEAD git branch -f master ORIG_HEAD вернуть master где она была . Истинный мердж . Когда один бранчхед не входит в ветку другого. HEAD стоит на master, мердж с feature. git status должен быть пустой. git diff --name-only master feature покажет какие файлы различаются. git merge-base master feature покажет на каком коммите была развилка. git merge feature анализирует изменение в каждом файле. Пробует auto-merge . CONFLICT . Если мердж прервался cat .git/MERGE_HEAD покажет id коммита, с которым мы мерджились, но возник конфликт. git show e2e4:index.html git show master:index.html git show feature:index.html покажут версии файлов в разных бранчхедах. 7.1-7.2 . git checkout --ours git checkout --theirs git checkout --merge git merge --abort git checkout --conflict=diff3 --merge index.html git merge --continue . ",
    "url": "/pages/Git/10.%20Merge.html",
    "relUrl": "/pages/Git/10.%20Merge.html"
  },"8": {
    "doc": "Резюме",
    "title": "Разработчик С#/React.js(TypeScript)",
    "content": ".NET 7 . ASP.NET: Web Api, Blazor, Razor Pages, MVC(Razor Views) .NET Framework / Mono . ASP.NET Webforms, ASP.NET MVC 5 . Microsoft Sql Server . Dapper, NHibernate, Entity Framework . PostgreSQL . SQLite . Контроль версий . Git: Git Submodule, Git Hooks Branching: Git Flow, GitHub Flow, Conventional Commits, Semantic Commits . GitHub: GitHub Actions: Dependabot, Renovatebot . GitHub Pages/GitHub Wikis: Markdown(Kramdown, GFM), coveralls.io, shields.io Генерация статических сайтов: Jekyll, Gatsby . CI/CD . Jenkins Appveyor Octopus Deploy . Контейнеризация . Docker: Dockerfile, Docker Compose, Docker Swarm Kubernetes: . Таск-трекеры . Jira, Bitrix24 . Вики-системы . Confluence MediaWiki . ",
    "url": "/leftmenu/100000.%20Resume.html#%D1%80%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%87%D0%B8%D0%BA-%D1%81reactjstypescript",
    "relUrl": "/leftmenu/100000.%20Resume.html#разработчик-сreactjstypescript"
  },"9": {
    "doc": "Резюме",
    "title": "Резюме",
    "content": " ",
    "url": "/leftmenu/100000.%20Resume.html",
    "relUrl": "/leftmenu/100000.%20Resume.html"
  },"10": {
    "doc": "101. Dockerfile Examples",
    "title": "101. Dockerfile Examples",
    "content": "Apache . Установить имидж апач Скопировать все файлы из подпапки проекта html В папку /usr/local/apache2/htdocs/ . FROM httpd:alpine COPY ./html/ /usr/local/apache2/htdocs/ . Ubuntu+Apache . Установить имидж Ubuntu Внутри него поставить apache2 . FROM ubuntu:20.04 RUN apt-get -y update RUN apt-get -y install apache2 RUN echo `Hello World from Docker! &gt; /var/www/html/index.html` CMD [\"/usr/sbin/apache2ctl\", \"-DFOREGROUND\"] EXPOSE 80 . ",
    "url": "/pages/Docker/101.%20Dockerfile%20Examples.html",
    "relUrl": "/pages/Docker/101.%20Dockerfile%20Examples.html"
  },"11": {
    "doc": "102. Dockerfile Commands",
    "title": "102. Dockerfile Commands",
    "content": "FROM . ENV . Лучше объявлять переменные окружения в docker . RUN . Для выполнения linux-команд RUN-команд может быть несколько. CMD - одна . COPY . Копирует файлы с хоста в контейнер . CMD . Точка входа в контейнер. Для запуска пэйлоада контейнера . ",
    "url": "/pages/Docker/102.%20Dockerfile%20Commands.html",
    "relUrl": "/pages/Docker/102.%20Dockerfile%20Commands.html"
  },"12": {
    "doc": "103. CLI Images",
    "title": "103. CLI Images",
    "content": "Вывести список имиджей . docker images docker image history e2e4 Посмотреть из каких слоев сделан имидж с IMAGE ID e2e4 docker search nginx найти на докерхабе имидж tomcat . Скачать существующий имидж . docker pull Как docker, но без создания контейнера . Создать имидж из Dockerfile в текущей папке . docker build -t demo-app:1.0.0 . Сохранить контейнер с CONTAINER ID e4e5 в имидж img1:v2 . docker commit e4e5 demo-app:v2 . Создать копию имиджа с другим тегом . docker tag demo-app:v1 demo-app:copy Создаст новый имидж img1:copy . Удалить . docker rmi e2e4 e2e4 это IMAGE ID из docker images. Можно имя имиджа . ",
    "url": "/pages/Docker/103.%20CLI%20Images.html",
    "relUrl": "/pages/Docker/103.%20CLI%20Images.html"
  },"13": {
    "doc": "104. CLI Containers",
    "title": "104. CLI Containers",
    "content": "Запуск контейнера из имиджа . docker run -d --name firstcontainer -p 8081:80 hello-docker:1.0.0 Из имиджа hello-docker запустить контейнер firstcontainer Порт 80 внутреннего приложения открыт как порт 8080 докер-энджина Совмещает в себе docker pull и docker start . Список контейнеров (включенных и выключенных) . docker ps -a . Остановка и запуск остановленного контенера . docker stop e2e4 остановить контейнер с CONTAINER ID e2e4 docker start e2e4 запустить остановленный контейнер . Сделать имидж из запущенного контейнера . Зайти в detached-контейнер в интерактивном режиме . docker exec -it e4e5 /bin/bash залогиниться в уже запущенный контейнер и запустить bash docker exec -it e4e5 /bin/sh если нет bash - выбрать sh exit (внутри контейнера) выйти docker commit e4e5 img1:v2 Сохранить контейнер с CONTAINER ID e4e5 в имидж img1:v2 . Удаление контейнеров . docker stop e2e4 остановить контейнер с CONTAINER ID e2e4 docker rm e2e4 удалить контейнер . ",
    "url": "/pages/Docker/104.%20CLI%20Containers.html",
    "relUrl": "/pages/Docker/104.%20CLI%20Containers.html"
  },"14": {
    "doc": "105. Docker Compose",
    "title": "105. Docker Compose",
    "content": "Docker Compose . Автоматически создает docker network для контейнеров в yml-файле . ",
    "url": "/pages/Docker/105.%20Docker%20Compose.html",
    "relUrl": "/pages/Docker/105.%20Docker%20Compose.html"
  },"15": {
    "doc": "106. CLI Network",
    "title": "106. CLI Network",
    "content": "Вывести сеть докера docker network ls . ",
    "url": "/pages/Docker/106.%20CLI%20Network.html",
    "relUrl": "/pages/Docker/106.%20CLI%20Network.html"
  },"16": {
    "doc": "11. Подвинуть/удалить ветку",
    "title": "Удаление ветки",
    "content": "git branch -d fix Удалить ветку fix Сработает только если ветка посередине графа git branch -D fix игнорирует положение вершины . git reset для того чтобы, не трогая WT, откатывать индекс + двигать ветку+HEAD . ",
    "url": "/pages/Git%20Branching/11.%20Branch%20Update%20Delete.html#%D1%83%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B2%D0%B5%D1%82%D0%BA%D0%B8",
    "relUrl": "/pages/Git%20Branching/11.%20Branch%20Update%20Delete.html#удаление-ветки"
  },"17": {
    "doc": "11. Подвинуть/удалить ветку",
    "title": "Git Reset --soft &lt;commit&gt;",
    "content": "Двигает вершину бранчи, и вместе с ней HEAD. WT + Индекс не остаются как были. Используется для того чтобы упаковать несколько предыдущих коммитов в один новый. git reset --soft 9e5e Подвинуть вершину бранчи и вместе с ней HEAD, в коммит 9e5e git reset --soft HEAD~ Подвинуть вершину бранчи и вместе с ней HEAD на один коммит назад . ",
    "url": "/pages/Git%20Branching/11.%20Branch%20Update%20Delete.html#git-reset---soft-commit",
    "relUrl": "/pages/Git%20Branching/11.%20Branch%20Update%20Delete.html#git-reset---soft-commit"
  },"18": {
    "doc": "11. Подвинуть/удалить ветку",
    "title": "Git Reset [--mixed] &lt;commit&gt; (по умолчанию)",
    "content": "То же что --soft, но сбрасыва индекс текущего коммита git reset 9e5e Подвинуть вершину бранчи, HEAD, изменить Index на коммит 9e5e git reset 9e5e --mixed -||- git reset HEAD Откатить индекс до состояние прошлого коммита. Использовать после git add . чтобы отменить лишнее проиндексированное git reset HEAD .idea Убрать из staginng файлы .idea . ",
    "url": "/pages/Git%20Branching/11.%20Branch%20Update%20Delete.html#git-reset---mixed-commit-%D0%BF%D0%BE-%D1%83%D0%BC%D0%BE%D0%BB%D1%87%D0%B0%D0%BD%D0%B8%D1%8E",
    "relUrl": "/pages/Git%20Branching/11.%20Branch%20Update%20Delete.html#git-reset---mixed-commit-по-умолчанию"
  },"19": {
    "doc": "11. Подвинуть/удалить ветку",
    "title": "Git Reset --hard &lt;commit&gt;",
    "content": "git reset --hard 2fad Для того, чтоб отменить вообще всё сделанное после коммита 2fad - вернуть текущую вершину[master] и HEAD вместе с ней на коммит 2fad. Коммиты, оставшиеся выше, останутся в анонимной ветке. Если запомнить номер коммита (найти через cat .git/ORIG_HEAD или в git reflog) можно вернуть master и HEAD обратно так же чере git reset --hard. git reset --hard HEAD . ",
    "url": "/pages/Git%20Branching/11.%20Branch%20Update%20Delete.html#git-reset---hard-commit",
    "relUrl": "/pages/Git%20Branching/11.%20Branch%20Update%20Delete.html#git-reset---hard-commit"
  },"20": {
    "doc": "11. Подвинуть/удалить ветку",
    "title": "11. Подвинуть/удалить ветку",
    "content": "Git Branch не умеет переносить ветку, на которой мы сейчас находимся . Reset Demystified . ",
    "url": "/pages/Git%20Branching/11.%20Branch%20Update%20Delete.html",
    "relUrl": "/pages/Git%20Branching/11.%20Branch%20Update%20Delete.html"
  },"21": {
    "doc": "Git",
    "title": "Git",
    "content": "Новый репозиторий . git init git add . git commit -m \"init\" git remote add origin https://github.com/aq-coding/имярепозитория.git git push -u origin master . Новая ветка . git checkout -b dev git add . git commit -m \"init\" git push origin dev . ",
    "url": "/leftmenu/11.%20Git.html",
    "relUrl": "/leftmenu/11.%20Git.html"
  },"22": {
    "doc": "11. Валидация",
    "title": "11. Валидация",
    "content": "using System.ComponentModel.DataAnnotations; public class Employee { public int Id { get; set; } [Required] [MaxLength(50,ErrorMessage =\"Name cannot exceed 50\")] public string Name { get; set; } [Required] [EmailAddress(ErrorMessage = \"Email invalid\")] [Display(Name=\"Office Email\")] public string Email { get; set; } [Required] public Dept? Departament { get; set; } } . ",
    "url": "/pages/DemoAppMvc/11.%20%D0%92%D0%B0%D0%BB%D0%B8%D0%B4%D0%B0%D1%86%D0%B8%D1%8F.html",
    "relUrl": "/pages/DemoAppMvc/11.%20%D0%92%D0%B0%D0%BB%D0%B8%D0%B4%D0%B0%D1%86%D0%B8%D1%8F.html"
  },"23": {
    "doc": "111. Dockerignore",
    "title": "111. Dockerignore",
    "content": " ",
    "url": "/pages/Docker/111.%20Dockerignore.html",
    "relUrl": "/pages/Docker/111.%20Dockerignore.html"
  },"24": {
    "doc": "12. EF & Sql Repository",
    "title": "12. EF & Sql Repository",
    "content": "Nuget appsettings.json AppDbContext.cs Program.cs EmployeeManagement/Models/ModelBuilderExtensions.cs Миграции EmployeeManagement/Models/SQLEmployeeRepository.cs . Nuget . Установить Microsoft.EntityFrameworkCore.SqlServer . dotnet add ./DemoAppMvc package Microsoft.EntityFrameworkCore.SqlServer dotnet add ./DemoAppMvc package Microsoft.EntityFrameworkCore.Tools . appsettings.json . { \"ConnectionStrings\": { \"DemoAppMvcConnection\" : \"server=(localdb)\\\\MSSQLLocalDB;database=DemoAppMvcDb;Trusted_Connection=true\" } } . AppDbContext.cs . using Microsoft.EntityFrameworkCore; public class AppDbContext : DbContext { public AppDbContext(DbContextOptions&lt;AppDbContext&gt; options) : base(options) { } public DbSet&lt;Employee&gt; Employees {get; set;} protected override void OnModelCreating(ModelBuilder builder) { base.OnModelCreating(builder); builder.Seed(); } } . Program.cs . Получить имя сервера SQL Express - утилита MSSQLLocalDB . using Microsoft.EntityFrameworkCore; var builder = WebApplication.CreateBuilder(args); builder.Services.AddDbContext&lt;AppDbContext&gt;(options =&gt; options.UseSqlServer( builder.Configuration.GetConnectionString(\"EmployeeDbConnection\") )); builder.Services.AddScoped&lt;IEmployeeRepository, SQLEmployeeRepository&gt;(); builder.Services.AddControllersWithViews(); var app = builder.Build(); app.UseStaticFiles(); app.MapControllerRoute( name: \"default\", pattern: \"{controller=Home}/{action=Index}/{id?}\"); app.Run(); . EmployeeManagement/Models/ModelBuilderExtensions.cs . using Microsoft.EntityFrameworkCore; public static class ModelBuilderExtensions { public static void Seed(this ModelBuilder builder) { builder.Entity&lt;Employee&gt;().HasData( new Employee{ Id = 1, Name = \"Alice\", Departament = Dept.IT, Email = \"alice@example.com\" }, new Employee{ Id = 2, Name = \"Bob\", Departament = Dept.IT, Email = \"bob@example.com\" }, new Employee{ Id = 3, Name = \"Charlie\", Departament = Dept.IT, Email = \"charlie@example.com\" } ); } } . EF Migrations . dotnet ef migrations add \"init\" dotnet ef database update . EmployeeManagement/Models/SQLEmployeeRepository.cs . public class SQLEmployeeRepository : IEmployeeRepository { private readonly AppDbContext context; public SQLEmployeeRepository(AppDbContext context) { this.context = context; } public Employee Add(Employee employee) { context.Employees.Add(employee); context.SaveChanges(); return employee; } public Employee Delete(int id) { Employee employee = context.Employees.Find(id); if(employee != null) { context.Employees.Remove(employee); context.SaveChanges(); } return employee; } public IEnumerable&lt;Employee&gt; GetAllEmployees() { return context.Employees; } public Employee GetEmployee(int Id) { return context.Employees.Find(Id); } public Employee Update(Employee employeeChanges) { var employee = context.Employees.Attach(employeeChanges); employee.State = Microsoft.EntityFrameworkCore.EntityState.Modified; context.SaveChanges(); return employeeChanges; } } . ",
    "url": "/pages/DemoAppMvc/12.%20EF%20SQL.html",
    "relUrl": "/pages/DemoAppMvc/12.%20EF%20SQL.html"
  },"25": {
    "doc": "Git Branching",
    "title": "Git Branching",
    "content": " ",
    "url": "/leftmenu/12.%20Git%20Branching.html",
    "relUrl": "/leftmenu/12.%20Git%20Branching.html"
  },"26": {
    "doc": "Git Remote",
    "title": "Git Remote",
    "content": " ",
    "url": "/leftmenu/13.%20Git%20Remote.html",
    "relUrl": "/leftmenu/13.%20Git%20Remote.html"
  },"27": {
    "doc": "13. File Upload",
    "title": "13. File Upload",
    "content": "EmployeeCreateViewModel.cs . using System.ComponentModel.DataAnnotations; public class EmployeeCreateViewModel { [Required] [MaxLength(50,ErrorMessage =\"Name cannot exceed 50\")] public string Name { get; set; } [Required] [EmailAddress(ErrorMessage = \"Email invalid\")] [Display(Name=\"Office Email\")] public string Email { get; set; } [Required] public Dept? Departament { get; set; } public IFormFile Photo { get; set; } } . _Layout.cshtml . &lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;meta name=\"viewport\" content=\"width=device-width\" /&gt; &lt;link href=\"~/lib/bootstrap/css/bootstrap.min.css\" rel=\"stylesheet\" /&gt; &lt;script src=\"~/lib/jquery/jquery.min.js\"&gt;&lt;/script&gt; &lt;script src=\"~/lib/bootstrap/js/bootstrap.min.js\"&gt;&lt;/script&gt; &lt;title&gt;@ViewBag.Title&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;header class=\"navbar navbar-expand-sm navbar-dark bg-dark\"&gt; &lt;nav class=\"container\"&gt; &lt;a class=\"navbar-brand\" asp-action=\"index\" asp-controller=\"home\"&gt; &lt;img src=\"~/images/employees.png\" height=\"30\" width=\"30\" /&gt; &lt;/a&gt; &lt;button type=\"button\" class=\"navbar-toggler\" data-bs-toggle=\"collapse\" data-bs-target=\"#collapsibleNavbar\"&gt; &lt;span class=\"navbar-toggler-icon\"&gt;&lt;/span&gt; &lt;/button&gt; &lt;div class=\"collapse navbar-collapse\" id=\"collapsibleNavbar\"&gt; &lt;ul class=\"navbar-nav\"&gt; &lt;li class=\"nav-item\"&gt; &lt;a asp-action=\"index\" asp-controller=\"home\" class=\"nav-link\"&gt;List&lt;/a&gt; &lt;/li&gt; &lt;li class=\"nav-item\"&gt; &lt;a asp-action=\"create\" asp-controller=\"home\" class=\"nav-link\"&gt;Create&lt;/a&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;/nav&gt; &lt;/header&gt; &lt;main class=\"container\"&gt; @RenderBody() &lt;/main&gt; &lt;/body&gt; @if(IsSectionDefined(\"Scripts\")) { @RenderSection(\"Scripts\", required: true) } &lt;/html&gt; . Create.cshtml . @model EmployeeCreateViewModel @{ ViewBag.Title = \"Create Employee\"; } &lt;form enctype=\"multipart/form-data\" asp-controller=\"Home\" asp-action=\"Create\" method=\"post\"&gt; ... &lt;div class=\"mb-3\"&gt; &lt;div class=\"input-group\"&gt; &lt;input asp-for=\"Photo\" class=\"form-control custom-file-input\" /&gt; &lt;/div&gt; &lt;/div&gt; ... &lt;/form&gt; @section Scripts { &lt;script&gt; $(document).ready(function(){ $('.custom-file-input').on(\"change\", function(){ var fileName =$(this).val().split(\"\\\\\").pop(); $(this).next('.custom-file-label').html(fileName); }) }); &lt;/script&gt; } . HomeController.cs . IHostingEnvironment . using Microsoft.AspNetCore.Mvc; public class HomeController : Controller { private readonly IEmployeeRepository _employeeRepository; private readonly Microsoft.AspNetCore.Hosting.IHostingEnvironment hostingEnvironment; public HomeController(IEmployeeRepository employeeRepository, Microsoft.AspNetCore.Hosting.IHostingEnvironment hostingEnvironment) { _employeeRepository = employeeRepository; this.hostingEnvironment = hostingEnvironment; } . Create(EmployeeCreateViewModel model) . [HttpPost] public IActionResult Create(EmployeeCreateViewModel model) { if (ModelState.IsValid) { string uniqueFileName = null; if(model.Photo !=null) { string uploadsFolder = Path.Combine(hostingEnvironment.WebRootPath, \"images\"); uniqueFileName = Guid.NewGuid().ToString() + \"_\" + model.Photo.FileName; string filePath = Path.Combine(uploadsFolder, uniqueFileName); model.Photo.CopyTo(new FileStream(filePath, FileMode.Create)); } Employee newEmployee = new Employee { Name = model.Name, Email = model.Email, Departament = model.Departament, PhotoPath = uniqueFileName }; _employeeRepository.Add(newEmployee); return RedirectToAction(\"details\", new {id = newEmployee.Id}); } return View(); } } . Details.cshtml . @model HomeDetailsViewModel @{ ViewBag.Title = \"Employee Details\"; var photoPath = \"/Images/\" + (Model.Employee.PhotoPath ?? \"noimage.jpg\"); } &lt;div class=\"row justify-content-center m-3\"&gt; &lt;div class=\"col-sm-8\"&gt; &lt;div class=\"card\"&gt; &lt;div class=\"card-header\"&gt; &lt;h1&gt;@Model.Employee.Name&lt;/h1&gt; &lt;/div&gt; &lt;div class=\"card-body text-center\"&gt; &lt;img class=\"card-img-top\" src=\"@photoPath\" /&gt; . Index.cshtml . @model IEnumerable&lt;Employee&gt; @{ ViewBag.Title = \"Employee List\"; } &lt;div class=\"row row-cols-1 row-cols-md-3 g-4 mt-3\"&gt; @foreach (var employee in Model) { var photoPath = \"~/Images/\" + (employee.PhotoPath ?? \"noimage.jpg\"); &lt;div class=\"col\"&gt; &lt;div class=\"card\"&gt; &lt;div class=\"card-header\"&gt; &lt;h5 class=\"card-title\"&gt;@employee.Name&lt;/h5&gt; &lt;/div&gt; &lt;img class=\"card-img-top\" src=\"@photoPath\" asp-append-version=\"true\" /&gt; . ",
    "url": "/pages/DemoAppMvc/13.%20Single%20File%20Upload.html",
    "relUrl": "/pages/DemoAppMvc/13.%20Single%20File%20Upload.html"
  },"28": {
    "doc": "Github",
    "title": "Github",
    "content": " ",
    "url": "/leftmenu/14.%20Github.html",
    "relUrl": "/leftmenu/14.%20Github.html"
  },"29": {
    "doc": "Github Actions",
    "title": "Github Actions",
    "content": " ",
    "url": "/leftmenu/15.%20Github%20Actions.html",
    "relUrl": "/leftmenu/15.%20Github%20Actions.html"
  },"30": {
    "doc": "2. Создать новый бранчхед здесь",
    "title": "2. Создать новый бранчхед здесь",
    "content": "Первая ветка master создается первым git commit после git init Дальше ветки создаются командой git branch или git checkout -b . Создать ветку git branch develop Создать на последнем коммите вершину develop . Создать ветку и сразу переключиться git checkout -b develop . ",
    "url": "/pages/Git%20Branching/2.%20Create%20branch%20head%20here.html",
    "relUrl": "/pages/Git%20Branching/2.%20Create%20branch%20head%20here.html"
  },"31": {
    "doc": "DemoAppCNC",
    "title": "DemoAppCNC",
    "content": "Второе занятие . https://github.com/cleannetcode/Index/discussions/30 . ",
    "url": "/leftmenu/2.%20DemoAppCNC.html",
    "relUrl": "/leftmenu/2.%20DemoAppCNC.html"
  },"32": {
    "doc": "2. Docker Advit",
    "title": "Docker",
    "content": "sudo systemctl status docker docker -v . ",
    "url": "/pages/Docker/grand_children/2.%20DockerAdvit.html#docker",
    "relUrl": "/pages/Docker/grand_children/2.%20DockerAdvit.html#docker"
  },"33": {
    "doc": "2. Docker Advit",
    "title": "Команды",
    "content": "docker run hello-world скачает имидж hello-world и запустит . docker ps показать живые контейнеры docker ps -a показать и живые и отключенные контейнеры . docker images показать все имиджи . docker search nginx найти на докерхабе имидж tomcat . docker pull nginx скачать но не запускать. docker run -d -p 1234:80 nginx запустить (скачать если не скачан) и отключиться d - дисконнект docker run -it -p 1234:80 nginx запустить интерактивно -p 1234:8080 Чтобы обратиться к порту 8080 контейнера докер, надо обратиться к порту 1234 машины. docker stop e2e4 остановить docker rm e2e4 грохнуть контейнер docker rmi nginx удалить имидж (контейнеры должны быть остановлены) . docker build -t myimage:v1 . создать имидж в текущей директории . docker tag myimage:v1 myimage:v2 переименовать тег . docker exec -it e2e4 /bin/bash залогиниться в уже запущенный контейнер и запустить bash . Dockerfile (docker build) . docker build -t testimage:v1 . сделать имидж из Dockerfile в текущей папке docker run -d -p 1377:80 testimage:v1 запустить 1377 внаружи - 80 внутри . nano ~/mydocker/Dockerfile . FROM ubuntu:20.04 RUN apt-get -y update RUN apt-get -y install apache2 RUN echo `Hello World from Docker! &gt; /var/www/html/index.html` CMD [\"/usr/sbin/apache2ctl\", \"-DFOREGROUND\"] EXPOSE 80 . Установка Docker Engine на Ubuntu . sudo apt-get update sudo apt-get install \\ ca-certificates \\ curl \\ gnupg \\ lsb-release sudo apt install apt-transport-https sudo mkdir -p /etc/apt/keyrings curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg echo \\ \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\ $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null sudo apt update sudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin . sudo usermod -aG docker $USER Добавить права текущему юзеру . ",
    "url": "/pages/Docker/grand_children/2.%20DockerAdvit.html#%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D1%8B",
    "relUrl": "/pages/Docker/grand_children/2.%20DockerAdvit.html#команды"
  },"34": {
    "doc": "2. Docker Advit",
    "title": "2. Docker Advit",
    "content": " ",
    "url": "/pages/Docker/grand_children/2.%20DockerAdvit.html",
    "relUrl": "/pages/Docker/grand_children/2.%20DockerAdvit.html"
  },"35": {
    "doc": "2. Git рабочий цикл",
    "title": "2. Git рабочий цикл",
    "content": "Начало работы с репозиторием . git status . git log --pretty=format:'%C(yellow)%h %C(dim green)%ad %C(reset)| %C(cyan)%s%d %C(#667788)[%an]' --date=format:'%F %R' . git log origin/master . git pull . Выбор ветки . git branch Проверить ветку git checkout -b task1 Переключиться или . git branch task1 git checkout task1 . Коммит . git add * git status git commit -m \"Added file and updated\" git push --set-upstream origin task1 . В веб-интерфейсе выбрать принять push, создать pull request . В веб-интрефейсе смерджить пулл-реквест . Удалить ветку . git checkout master git branch -d task1 git push origin --delete task1 git checkout -b task1 . ",
    "url": "/pages/DemoAppMvc/2.%20Git.html",
    "relUrl": "/pages/DemoAppMvc/2.%20Git.html"
  },"36": {
    "doc": "2. Солюшен",
    "title": "2. Солюшен",
    "content": " ",
    "url": "/pages/DemoAppRT/2.%20Solution.html",
    "relUrl": "/pages/DemoAppRT/2.%20Solution.html"
  },"37": {
    "doc": "2. Просмотреть состояние файлов в коммите",
    "title": "2. Просмотреть состояние файлов в коммите",
    "content": "Просмотр рабочей директории git ls-files Делает то же что и ls, но позволяет фильтровать git ls-files – :!:*.md Показать все файлы без .md . Показать состояние файла в коммите git show develop:index.html показать версию index.html из бранчхеда develop git show :index.html Показать состояние index.html в индексе текущего коммита git show :\"текст\" Найти коммит по тексту “текст” коммита git show xxxx Показать коммит xxxx должно быть минимум четыре цифры . Показать состояние файла в индексе git show :index.html . Показать изменения из коммита xxxx git show Показать изменения, сделанные коммитом из HEAD git show xxxx Показывать изменения, сделанные коммитом xxxx. git show --pretty=fuller git show HEAD~ Показать все изменения сделанные родителем коммита HEAD То же что HEAD~1 то же что @~1 . Показать изменения в указанных файлах из коммита xxxx git show @~2 -- index.html Показать изменения в файле index.html в прародителе HEAD если были git show @~2:index.html Показать состояние index.html в прародителе HEAD . Список файлов измененных коммитом how-do-i-list-all-the-files-in-a-commit . Вся история изменений одного файла view-the-change-history-of-a-file-using-git-versioning show-history-of-a-file . ",
    "url": "/pages/Git/2.%20View%20commit%20contents.html",
    "relUrl": "/pages/Git/2.%20View%20commit%20contents.html"
  },"38": {
    "doc": "10. Настроить Git в Windows",
    "title": "Конфигурация Git",
    "content": "Задать имя и почту в репозитории локально (в файле .git/config) . git config user.name \"Name Surname\" git config user.email mail@example.com cat .git/config Вывест конфиг текущей папки (через cat) git config --list Вывести конфиг репозитория текущей папки (через git) Удалить из репозитория текущей папки имя и почту: git config --unset user.name git config --unset user.email git config --remove-section user . Задать имя и почту глобально . git config --global user.name \"...\" git config --global user.email \"...\" git config --system core.autocrlf true Найстроить лайн-брейки на уровне системы cat ~/.gitconfig Вывести глобальный конфиг (через cat) git config --list --global Вывести глобальный конфиг (через git) git config --global -e Открыть конфиг в редакторе по умолчанию . git config --global core.editor /Applications/Sublime\\ Текстовый редактор по умолчанию Примеры для разных редакторов git config --global core.editor \"code --wait\" VsCode . Каскад от более к менее приоритетному: . --local ↓ --global ↓ --system . Алиасы git . git config --global alias.c 'config --global' git c вместо git config --global . ",
    "url": "/pages/Git%20Branching/20.%20Configuration.html#%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%86%D0%B8%D1%8F-git",
    "relUrl": "/pages/Git%20Branching/20.%20Configuration.html#конфигурация-git"
  },"39": {
    "doc": "10. Настроить Git в Windows",
    "title": "Git Help",
    "content": "git config -h помощь git help config помощь по git config . ",
    "url": "/pages/Git%20Branching/20.%20Configuration.html#git-help",
    "relUrl": "/pages/Git%20Branching/20.%20Configuration.html#git-help"
  },"40": {
    "doc": "10. Настроить Git в Windows",
    "title": "10. Настроить Git в Windows",
    "content": " ",
    "url": "/pages/Git%20Branching/20.%20Configuration.html",
    "relUrl": "/pages/Git%20Branching/20.%20Configuration.html"
  },"41": {
    "doc": "201. Установка Docker на Ubuntu",
    "title": "201. Установка Docker на Ubuntu",
    "content": "Установка Docker на Ubuntu . ",
    "url": "/pages/Docker/201.%20DockerOnUbuntu.html",
    "relUrl": "/pages/Docker/201.%20DockerOnUbuntu.html"
  },"42": {
    "doc": "3. Создать новый бранчхед на другом коммите",
    "title": "3. Создать новый бранчхед на другом коммите",
    "content": "git branch develop HEAD@{6} создать вершину develop на шестом положении HEAD из рефлога git branch --force develop xxxx Создать или подвинуть если уже есть вершину develop на коммит xxxx. ",
    "url": "/pages/Git%20Branching/3.%20Create%20branch%20head%20elsewhere.html",
    "relUrl": "/pages/Git%20Branching/3.%20Create%20branch%20head%20elsewhere.html"
  },"43": {
    "doc": "3. Сравнить",
    "title": "3. Сравнить",
    "content": "Что изменилось? От ласт-коммита к WT git diff HEAD Как git status, только для содержимого файлов git diff @ git diff -- index.html Сравнить index.html из WT с последним коммитом . Что изменилось? От коммита xxxx к WT git diff xxxx Сравнить WT с коммитом xxxx . Сравнить два коммита git diff xxxx yyyy Дифф xxxx с yyyy git diff master..feature То же что и пробел. Дифф между коммитами, на которых стоят бранчхеды. git diff master...feature Дифф feature с последним общим коммитом веток . Сравнить staging с указанным коммитом git diff --cached Сравнить staging с HEAD git diff не показывает untracked файлы . Что изменилось WT -&gt; Staging Git diff \\[\\-\\- index.md\\] . Git diff &lt;один коммит&gt; . WT vs Коммит . Git Diff --name-only master feature . ",
    "url": "/pages/Git/3.%20Diff.html",
    "relUrl": "/pages/Git/3.%20Diff.html"
  },"44": {
    "doc": "3. Docker Nana",
    "title": "Конфигурация yaml-файла Docker Compose для установки Mongo+Mongo Express",
    "content": "version:'3' services: mongodb: image: mongo ports: - 27017:27017 environment: - ME_INITDB_ROOT_USERNAME=admin - ME_INITDB_ROOT_PASSWORD=password mongodb-express: image: mongo-express ports: - 8080:8081 environment: - ME_CONFIG_MONGODB_ADMINUSERNAME=admin - ME_CONFIG_MONGODB_ADMINPASSWORD=password - ME_CONFIG_MONGODB_SERVER=mongodb . Запуск конейнеров из docker compose (с автоматическим созданием docker-network) . Выполнить в docker-compose файл mongo.yaml . docker-compose -f mongo.yaml up . -f выбрать файл up запустить все контейнеры . Остановить контейнеры docker compose и удалить docker network . docker-compose -f mongo.yaml down . Dockerfile Приложения на Node.js . FROM node:13-alpine ENV MONGO_DB_USERNAME=admin MONGO_DB_PWD=password RUN mkdir -p /home/app COPY ./app /home/app CMD [\"node\", \"home/app/server.js\"] . Билд докерфайла вместе с запуском . docker build -t my-app:1.0 . \\ docker run my-app:1.0 docker exec -it e4e5 /bin/sh ls /home/app . ",
    "url": "/pages/Docker/grand_children/3.%20DockerNana.html#%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%86%D0%B8%D1%8F-yaml-%D1%84%D0%B0%D0%B9%D0%BB%D0%B0-docker-compose-%D0%B4%D0%BB%D1%8F-%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B8-mongomongo-express",
    "relUrl": "/pages/Docker/grand_children/3.%20DockerNana.html#конфигурация-yaml-файла-docker-compose-для-установки-mongomongo-express"
  },"45": {
    "doc": "3. Docker Nana",
    "title": "AWS",
    "content": "Ссылка Пуши имиджа my-app . docker build # Тэг нужен для того, чтобы docker push заливал имидж не на dockerhub, а в AWS docker tag docker push . version:'3' services: mongodb: image: mongo ports: - 27017:27017 environment: - ME_INITDB_ROOT_USERNAME=admin - ME_INITDB_ROOT_PASSWORD=password mongodb-express: image: mongo-express ports: - 8080:8081 environment: - ME_CONFIG_MONGODB_ADMINUSERNAME=admin - ME_CONFIG_MONGODB_ADMINPASSWORD=password - ME_CONFIG_MONGODB_SERVER=mongodb . ",
    "url": "/pages/Docker/grand_children/3.%20DockerNana.html#aws",
    "relUrl": "/pages/Docker/grand_children/3.%20DockerNana.html#aws"
  },"46": {
    "doc": "3. Docker Nana",
    "title": "Docker Volumes в Compose",
    "content": "Том mongo-data . version: '3' services: mongodb: image: mongo ports: - 27017:27017 environment: - ME_INITDB_ROOT_USERNAME=admin - ME_INITDB_ROOT_PASSWORD=password volumes: - mongo-data:/data/db mongo-express: image: mongo-express ports: - 8080:8081 environment: - ME_CONFIG_MONGODB_ADMINUSERNAME=admin - ME_CONFIG_MONGODB_ADMINPASSWORD=password - ME_CONFIG_MONGODB_SERVER=mongodb #Здесь монтируется том mongo-data volumes: mongo-data: driver: local . ",
    "url": "/pages/Docker/grand_children/3.%20DockerNana.html#docker-volumes-%D0%B2-compose",
    "relUrl": "/pages/Docker/grand_children/3.%20DockerNana.html#docker-volumes-в-compose"
  },"47": {
    "doc": "3. Docker Nana",
    "title": "3. Docker Nana",
    "content": "Посмотреть логи, которые произвел контейнер . docker logs e4e5 . docker pull mongo docker pull mongo-express . Docker network. Базовые команды . docker network ls docker network create mongo-network . Загрузка-запуск контейнера Mongo . Стандартный порт монги: 27017 . docker run -p 27017:27017 mongo . Запускаем монгу и задаем переменные окружения через -e . docker run -d \\ -p 27017:27017 \\ -e MONGO_INITDB_ROOT_USERNAME=admin \\ -e MONGO_INITDB_ROOT_PASSWORD=password \\ --name mongodb \\ --net mongo-network \\ mongo # Проверить что всё запустилось docker logs e4e5 docker logs e4e5 | tail . Загрузка-запуск контейнера Mongo Express . Mongo Express - веб-фронтенд для монги как phpmyadmin . docker run -d \\ -p 8081:8081 \\ -e ME_CONFIG_MONGODB_ADMINUSERNAME=admin \\ -e ME_CONFIG_MONGODB_ADMINPASSWORD=password \\ --net mongo-network \\ --name mongo-express \\ -e ME_CONFIG_MONGODB_SERVER=mongodb \\ mongo-express # Проверить что всё запустилось docker logs e4e5 docker logs e4e5 | tail . ",
    "url": "/pages/Docker/grand_children/3.%20DockerNana.html",
    "relUrl": "/pages/Docker/grand_children/3.%20DockerNana.html"
  },"48": {
    "doc": "3. Солюшен",
    "title": "3. Солюшен",
    "content": "VS Code . Ctrl+Shift+P Generate Assets for Build and Debug . CLI: Создание солюшена и проекта . dotnet new gitignore dotnet new sln --name DemoAppMvc dotnet new web -o DemoAppMvc dotnet sln add ./DemoAppMvc/DemoAppMvc.csproj dotnet build . Запуск проекта . cd DemoAppMvc dotnet run --project ./DemoAppMvc.csproj . ",
    "url": "/pages/DemoAppMvc/3.%20%D0%A1%D0%BE%D0%BB%D1%8E%D1%88%D0%B5%D0%BD.html",
    "relUrl": "/pages/DemoAppMvc/3.%20%D0%A1%D0%BE%D0%BB%D1%8E%D1%88%D0%B5%D0%BD.html"
  },"49": {
    "doc": "4. Docker Minin",
    "title": "4. Docker Minin",
    "content": "Видео docker version посмотреть версию docker ps --help хелп по ps docker image --help . docker build . Создать имидж и докерфайла в рабочей директории docker run e2e4 Запустить имидж (контейнер запускается другой командой) . docker pull node Скачать имидж node.js . docker run -it node запустить в интерактивном режиме exit выйти из контейнера . docker container prune удалить все остановленные контейнеры . Dockerfile . # Докер смотрит, есть ли имидж node локально, качает FROM node # То же что и cd /app WORKDIR /app # Первая точка - директория, где лежит сам Dockerfile # Вторая точка - куда в образе поместить относительно рабочей директории COPY . #Выполнить команду npm install RUN npm install #Открыть порт при запуске. Необязательно, но best practice. EXPOSE 3000 #Запустить приложение app.js в ноде #RUN используется для сборки образа #CMD для запуска образа CMD [\"node\", \"app.js\"] . docker stop e2e4 Остановить контейнер docker run работать на такой контейнер не будет docker start e2e4 запустить установленный контейнер . Изменения в dockerfile . FROM node WORKDIR /app # COPY package.json /app COPY . RUN npm install EXPOSE 3000 CMD [\"node\", \"app.js\"] . docker attach e2e4 подключиться к контейнеру . docker logs e2e4 что выводилось в контейнере docker logs containername что выводилось - по имени контейнера . docker run -d -p 3000:3000 --name containername --rm e2e4 --rm Удалить контейнер если выполнен docker stop .Dockerignore . Какие файлы и папки из директории Dockerfile не нужны в образе .git .idea Dockerfile . docker image instpect myimage Показать из каких слоев сделан имидж . ENV-переменные в Dockerfilew . FROM node WORKDIR /app COPY package.json /app COPY . RUN npm install # Номер порта выносится в переменную ENV PORT 4200 EXPOSE $PORT CMD [\"node\", \"app.js\"] . Задание env переменной на запуске . -e параметр docker run -d -p 3000:80 -e PORT=80 --rm --name logsapp logsapp:env . Все ENV-переменные в файле . Создается файл config/.env . PORT=4200 . docker run -d -p 3000:80 -env-file ./config/.env --rm --name logsapp logsapp:env . Docker Volumes . Общая папка для нескольких контейнеров docker run -d -p 3000:3000 -v vol1:/app/data -v vol2:\"/Users/akupc/WebStormPojrects/app:/app\" -v /app/node_modules/ --rm --name appcontainer appimage:apptag docker volume --help -v myvolume:/app/data Имя волюма logs, расположение /app/data docker volume ls посмотреть список волюмов docker volume inspect myvolume . ENV-переменные в Dockerfilew . FROM node WORKDIR /app COPY package.json /app COPY . RUN npm install ENV PORT 4200 VOLUME [ \"/app/data\" ] EXPOSE $PORT CMD [ \"node\", \"app.js\" ] . Создаются автоматически параметром -v Создать волюм из консоли docker volume create myvolume . ",
    "url": "/pages/Docker/grand_children/4.%20DockerMinin.html",
    "relUrl": "/pages/Docker/grand_children/4.%20DockerMinin.html"
  },"50": {
    "doc": "4. Github Actions",
    "title": "4. Github Actions",
    "content": "Билд .NET без деплоя .github/workflows/ci.yml . name: Publish on: workflow_dispatch: push: branches: - main jobs: publish: runs-on: ubuntu-latest steps: - uses: actions/checkout@v3 - name: .NET 7 Installation uses: actions/setup-dotnet@v3 with: dotnet-version: '7.0.x' - name: Package restore run: dotnet restore ./DemoAppMvc.sln - name: Build run: dotnet build ./DemoAppMvc.sln --configuration Release --no-restore - name: Publish run: dotnet publish ./DemoAppMvc.sln --configuration Release --no-build . Деплой по ssh . - name: Deploy uses: appleboy/ssh-action@master with: host: username: key: port: 22 script: | . Деплой в докерхаб . Настроить Secrets DOCKER_USERNAME DOCKER_PASSWORD . - name: Docker build-publish uses: mr-smithers-excellent/docker-build-push@v5.9 with: image: towk/demoapp tags: latest registry: docker.io username: $ password: $ . Dockerfile . FROM mcr.microsoft.com/dotnet/aspnet:7.0 AS base WORKDIR /app EXPOSE 80 EXPOSE 443 FROM mcr.microsoft.com/dotnet/sdk:7.0 AS build WORKDIR /src COPY [\"DemoAppMvc/DemoAppMvc.csproj\", \"DemoAppMvc/\"] RUN dotnet restore \"DemoAppMvc/DemoAppMvc.csproj\" COPY . WORKDIR \"/src/DemoAppMvc\" RUN dotnet build \"DemoAppMvc.csproj\" -c Release -o /app/build FROM build AS publish RUN dotnet publish \"DemoAppMvc.csproj\" -c Release -o /app/publish /p:UseAppHost=false FROM base AS final WORKDIR /app COPY --from=publish /app/publish . ENTRYPOINT [\"dotnet\", \"DemoAppMvc.dll\"] .dockerignore .dockerignore **/.classpath **/.dockerignore **/.env **/.git **/.gitignore **/.project **/.settings **/.toolstarget **/.vs **/.vscode **/*.*proj.user **/*.dbmdl **/*.jfm **/azds.yaml **/bin **/charts **/docker-compose* **/Dockerfile* **/node_modules **/npm-debug.log **/obj **/secrets.dev.yaml **/values.dev.yaml LICENSE README.md . docker compose . Правый клик на проекте&gt; Add &gt; Container Orchestrations support&gt; Docker Compose . ",
    "url": "/pages/DemoAppMvc/4.%20Github%20Actions.html",
    "relUrl": "/pages/DemoAppMvc/4.%20Github%20Actions.html"
  },"51": {
    "doc": "4. Подвинуть бранчхед",
    "title": "4. Подвинуть бранчхед",
    "content": "Подвинуть бранчхед на котором нет HEAD git branch -f master xxxx переместить бранчхед master на коммит xxxx или создать если её не существует. HEAD не должа стоять на этом бранчхеде. git branch -f develop master переместить бранчхед develop на тот же коммит что и master. Подвинуть бранчхед на котором HEAD git checkout -B hotfix xxxx подвинуть master вместе с HEAD если master существует. Если master не существует - создать и подвинуть на него HEAD. Заменяет git branch -f hotfix xxxx, git checkout hotfix . Восстановить положение бранчхеда из рефлога git branch develop HEAD@{'2017-09-12 22:49:07 +0200'} восстановить вершину develop на состояние HEAD из даты . ",
    "url": "/pages/Git%20Branching/4.%20Move%20branch%20head.html",
    "relUrl": "/pages/Git%20Branching/4.%20Move%20branch%20head.html"
  },"52": {
    "doc": "4. Откатить WT до коммита",
    "title": "4. Откатить WT до коммита",
    "content": "Откатить всю WT и Staging до ласт-коммита. Всё несохраненное будет удалено. git checkout -f Отменить все изменения WT, отменить весь текущий коммит. untracked не трогает. git checkout -f HEAD То же самое. git checkout -- index.html Откатить отдельный файл в WT до коммита xxxx. Добавить новое состояние в Staging. git checkout xxxx -- index.html Откатить index.html в WT до xxxx + Добавить новую версию в индекс. То же что git checkout xxxx index.html . git checkout @~~~~ -- Program.cs //Откатить Program.cs на 4 коммита назад git checkout @~4 . Откатить отдельный файл в WT до коммита xxxx. Не добавлять новое состояние в Staging. git checkout xxxx -- index.html git checkout reset -- index.html . Откатить отдельный файл в WT до состояние в Index(Staging) git checkout index.html . ",
    "url": "/pages/Git/4.%20WT%20Update.html",
    "relUrl": "/pages/Git/4.%20WT%20Update.html"
  },"53": {
    "doc": "5. Добавить в Staging",
    "title": "5. Добавить в Staging",
    "content": "Добавить добавление файла в Staging git add . Добавить все untracked файлы в текущий коммит git add -A То же, но для тех ОС, где нет оператора точки git add index.md Добавить index.md в текущий коммит . git add src добавить папку src. Должна быть непустой. touch src/.gitkeep создать файл в пустой папке . Добавить изменения отдельных строчек в файле в Staging git add -p index.html index.md index.php git будет спрашивать что делать с каждым измененным файлом . Добавить в Staging то, что находится под гитигнором git add -f -- .idea/project.iml добавит файл, даже если он в .gitignore . Добавить в Staging удаление файла. WT не трогать. git rm -r --cached index.md Удалить src только из индекса, без рабочей директории Используется что далее добавить в .gitignore. Добавить в Staging удаление файла + удалить его из WT git rm -r src Удалить и из рабочей директории из текущего коммита папку со всеми вложениями То же что rm -r src + git add src git rm -f index.md Удалить файл. Игнорировать предупреждение, что он modified. Добавить переименование в Staging. Переименовать в WT Переименовать файл и в рабочей директории и в индексе текущего коммита git mv index.html index.md Переименовать index.html в index.md . ",
    "url": "/pages/Git/5.%20Add%20to%20Staging.html",
    "relUrl": "/pages/Git/5.%20Add%20to%20Staging.html"
  },"54": {
    "doc": "5. Удалить бранчхед",
    "title": "5. Удалить бранчхед",
    "content": "git branch -D feature удалить тупиковый бранчхед git branch -d feature удалить бранчхед в середине другой ветки Ц . ",
    "url": "/pages/Git%20Branching/5.%20Delete%20branch%20head.html",
    "relUrl": "/pages/Git%20Branching/5.%20Delete%20branch%20head.html"
  },"55": {
    "doc": "5. Docker Compose",
    "title": "Docker Compose",
    "content": "nginx.conf docker-compose.yml . До запуска docker compose up проверить чтобы ничего не было запущено . docker compose up --force-recreate -d . запустить docker compose с обновлением имиджей (–force-recreate) и в фоне (–detached) . docker compose stop . остановить docker compose когда он в состоянии detached . docker ps -a Список контейнеров docker image prune Удалить старые имиджи docker exec backend /bin/bash . nginx.conf . worker_processes 4; events { worker_connections 1024; } http { server { listen 80; location /demoapp { proxy_pass http://backend:80; } } } . docker-compose.yml . version: '3.4' services: proxy: image: nginx:latest container_name: reverse_proxy_demo depends_on: - backend volumes: - ./nginx.conf:/etc/nginx/nginx.conf ports: - 80:80 backend: environment: - ASPNETCORE_ENVIRONMENT: \"Development\" image: towk/demoapp:latest ports: - 5032:80 . ",
    "url": "/pages/DemoAppMvc/5.%20Docker%20Compose.html#docker-compose",
    "relUrl": "/pages/DemoAppMvc/5.%20Docker%20Compose.html#docker-compose"
  },"56": {
    "doc": "5. Docker Compose",
    "title": "5. Docker Compose",
    "content": "Пакуем приложения ASP.NET Core с помощью Docker . ",
    "url": "/pages/DemoAppMvc/5.%20Docker%20Compose.html",
    "relUrl": "/pages/DemoAppMvc/5.%20Docker%20Compose.html"
  },"57": {
    "doc": "Dotnet",
    "title": "Dotnet",
    "content": " ",
    "url": "/leftmenu/502.%20Dotnet.html",
    "relUrl": "/leftmenu/502.%20Dotnet.html"
  },"58": {
    "doc": "VS Code",
    "title": "VS Code",
    "content": "Сделать git-bash терминалом по умолчанию: . Ctrl+Shift+P -&gt; Terminal: Select Default Profile Выбрать из списка . Настроить keep alive для git-bash в Windows . https://superuser.com/questions/699676/how-to-prevent-ssh-from-disconnecting-if-its-been-idle-for-a-while ssh {USERNAME}@{URL} -p 22 -o \"ServerAliveInterval 60\"{ENTER}{DELAY 1000}{PASSWORD}{ENTER} для keepass . ",
    "url": "/leftmenu/506.%20VSCode.html",
    "relUrl": "/leftmenu/506.%20VSCode.html"
  },"59": {
    "doc": "6. Подвинуть HEAD на другой бранчхед",
    "title": "6. Подвинуть HEAD на другой бранчхед",
    "content": "Подвинуть HEAD когда чистый git status Подвинуть HEAD когда git status не чистый, но состояния измененных файлав в ласт-коммите и новом коммите идентичны git checkout develop подвинуть HEAD на бранчхед develop . Подвинуть HEAD когда git status не чистый и файлы в ласт-коммите и новом коммите различаются git checkout --force develop Изменения WT и Staging будут выбросить. Вернуть HEAD на предыдущее значение git checkout @{-1},git checkout - . Сохранить в стэш изменения из WT git stash Сохраняет состояние WT. Использовать перед например git checkout. git stash pop Восстанавливает WT из стэша. ",
    "url": "/pages/Git%20Branching/6.%20Move%20HEAD.html",
    "relUrl": "/pages/Git%20Branching/6.%20Move%20HEAD.html"
  },"60": {
    "doc": "6. Program.cs",
    "title": "6. Program.cs",
    "content": "Program.cs . var builder = WebApplication.CreateBuilder(args); builder.Services.AddControllersWithViews(); var app = builder.Build(); app.UseStaticFiles(); app.MapControllerRoute( name: \"default\", pattern: \"{controller=Home}/{action=Index}/{id?}\"); app.Run(); . ",
    "url": "/pages/DemoAppMvc/6.%20Program_cs.html",
    "relUrl": "/pages/DemoAppMvc/6.%20Program_cs.html"
  },"61": {
    "doc": "6. Изменить/Отменить Staging",
    "title": "6. Изменить/Отменить Staging",
    "content": "Удалить изменения из Staging. В WT всё остается как было. git reset HEAD -- . Убрать из Staging все добавленные изменения git reset HEAD -- .idea удалить из Staging изменения в .idea . Удалить изменения из Staging. WT тоже откатить до HEAD. git checkout -f Отменить все изменения WT, отменить весь Staging. untracked в WT не трогать. git checkout -f HEAD То же самое. git checkout --force master Обновить WT до состояния ласт-коммита master. Отменить весь Staging. Поставить HEAD на master. Удалить untracked git clean -d git clean -x git clean -f git clean -dxf . ",
    "url": "/pages/Git/6.%20Staging%20Update.html",
    "relUrl": "/pages/Git/6.%20Staging%20Update.html"
  },"62": {
    "doc": "7. Удалить Tracked из Index",
    "title": "7. Удалить Tracked из Index",
    "content": " ",
    "url": "/pages/Git/7.%20Tracked%20Update.html",
    "relUrl": "/pages/Git/7.%20Tracked%20Update.html"
  },"63": {
    "doc": "7. Модели",
    "title": "7. Модели",
    "content": "Models/Dept.cs Models/Employee.cs ViewModels/HomeDetailsViewModel.cs . Models/Dept.cs . public enum Dept { None, HR, IT, Payroll } . Models/Employee.cs . using System.ComponentModel.DataAnnotations; public class Employee { public int Id { get; set; } public string Name { get; set; } public string Email { get; set; } public Dept? Departament { get; set; } public string? PhotoPath { get; set; } } . ",
    "url": "/pages/DemoAppMvc/7.%20%D0%9C%D0%BE%D0%B4%D0%B5%D0%BB%D0%B8.html",
    "relUrl": "/pages/DemoAppMvc/7.%20%D0%9C%D0%BE%D0%B4%D0%B5%D0%BB%D0%B8.html"
  },"64": {
    "doc": "8. Bootstrap&Jquery",
    "title": "8. Bootstrap&Jquery",
    "content": "libman wwwroot/images/employees.png Views/_ViewImports.cshtml Views/_ViewStart.cshtml Views/Shared/_Layout.cshtml . libman Bootstrap Jquery . cd DemoAppMvc mkdir wwwroot libman init libman install bootstrap libman install jquery . wwwroot/images/employees.png . wwwroot/images/employees.png . Views/_ViewImports.cshtml . @addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers . Views/_ViewStart.cshtml . @{ Layout = \"_Layout\"; } . Views/Shared/_Layout.cshtml . &lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;meta name=\"viewport\" content=\"width=device-width\" /&gt; &lt;link href=\"~/lib/bootstrap/css/bootstrap.min.css\" rel=\"stylesheet\" /&gt; &lt;script src=\"~/lib/jquery/jquery.min.js\"&gt;&lt;/script&gt; &lt;script src=\"~/lib/bootstrap/js/bootstrap.min.js\"&gt;&lt;/script&gt; &lt;title&gt;@ViewBag.Title&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;header class=\"navbar navbar-expand-sm navbar-dark bg-dark\"&gt; &lt;nav class=\"container\"&gt; &lt;a class=\"navbar-brand\" asp-action=\"index\" asp-controller=\"home\"&gt; &lt;img src=\"~/images/employees.png\" height=\"30\" width=\"30\" /&gt; &lt;/a&gt; &lt;button type=\"button\" class=\"navbar-toggler\" data-bs-toggle=\"collapse\" data-bs-target=\"#collapsibleNavbar\"&gt; &lt;span class=\"navbar-toggler-icon\"&gt;&lt;/span&gt; &lt;/button&gt; &lt;div class=\"collapse navbar-collapse\" id=\"collapsibleNavbar\"&gt; &lt;ul class=\"navbar-nav\"&gt; &lt;li class=\"nav-item\"&gt; &lt;a asp-action=\"index\" asp-controller=\"home\" class=\"nav-link\"&gt;List&lt;/a&gt; &lt;/li&gt; &lt;li class=\"nav-item\"&gt; &lt;a asp-action=\"create\" asp-controller=\"home\" class=\"nav-link\"&gt;Create&lt;/a&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;/nav&gt; &lt;/header&gt; &lt;main class=\"container\"&gt; @RenderBody() &lt;/main&gt; &lt;/body&gt; &lt;/html&gt; . ",
    "url": "/pages/DemoAppMvc/8.%20Bootstrap.html",
    "relUrl": "/pages/DemoAppMvc/8.%20Bootstrap.html"
  },"65": {
    "doc": "8. Закоммитить",
    "title": "Git Commit -v",
    "content": " ",
    "url": "/pages/Git/8.%20Do%20Commit.html#git-commit--v",
    "relUrl": "/pages/Git/8.%20Do%20Commit.html#git-commit--v"
  },"66": {
    "doc": "8. Закоммитить",
    "title": "Git Reset &lt;pathspec&gt;",
    "content": "git reset HEAD сбросить весь индекс текущего коммита git reset index.html удалить из индекс то, что было сделано git add index.html . ",
    "url": "/pages/Git/8.%20Do%20Commit.html#git-reset-pathspec",
    "relUrl": "/pages/Git/8.%20Do%20Commit.html#git-reset-pathspec"
  },"67": {
    "doc": "8. Закоммитить",
    "title": "8. Закоммитить",
    "content": "Чисто коммит git commit Отправить в репозиторий текущий коммит git commit --author='John Smith' &lt;john@me.com&gt; --date='...' Задать автора, дату git commit -m \"Text\" Закоммитить с сообщением “Text” . Добавить в Staging и сразу закоммитить. Не работает для untracked git commit -m 'Text' index.md Добавить изменения файла index.md в индекс, закоммитить с текстом Text. Работает только для tracked файлов. git commit -a Добавить в индекс все tracked файлы git commit -a -m 'Text' то же, добавить в индес все modified и закоммитить. git commit -am 'Text' -||- . Алиас для полного Git Add . + Git Commit для tracked и untracked git config --global alias.commitall '!git add .;git commit' git config --global alias.commitall '!git add -A;git commit' Вызовы будут выглядеть: git commitall -m 'Text' Отмена одного последнего коммита git commit --amend branchhead и HEAD вернутся на один коммит назад, и граф будет продолжаться оттуда. Первоначальный коммит будет в анонимной ветке. Эквивалентно git reset --soft @~;git commit Так же используется для изменения описания последнего коммита, без изменений в файлах. ",
    "url": "/pages/Git/8.%20Do%20Commit.html",
    "relUrl": "/pages/Git/8.%20Do%20Commit.html"
  },"68": {
    "doc": "9. Mock Repository",
    "title": "9. Mock Repository",
    "content": "Models/IEmployeeRepository.cs Models/MockEmployeeRepository.cs DI Мокапа Репозитория . Models/IEmployeeRepository.cs . public interface IEmployeeRepository { Employee GetEmployee(int Id); IEnumerable&lt;Employee&gt; GetAllEmployees(); Employee Add(Employee employee); Employee Update(Employee employeeChanges); Employee Delete(int id); } . Models/MockEmployeeRepository.cs . using System.Runtime.CompilerServices; public class MockEmployeeRepository : IEmployeeRepository { private List&lt;Employee&gt; _employeeList; public MockEmployeeRepository() { _employeeList = new List&lt;Employee&gt;() { new Employee(){Id = 1, Name = \"Mary\", Departament = Dept.HR, Email=\"mary@example.com\"}, new Employee(){Id = 2, Name = \"John\", Departament = Dept.IT, Email=\"john@example.com\"}, new Employee(){Id = 3, Name = \"Sam\", Departament = Dept.IT, Email=\"sam@example.com\"} }; } public Employee GetEmployee(int Id) { return _employeeList.FirstOrDefault&lt;Employee&gt;(e =&gt; e.Id == Id); } public IEnumerable&lt;Employee&gt; GetAllEmployees() { return _employeeList; } public Employee Add(Employee employee) { employee.Id = _employeeList.Max(e =&gt; e.Id) + 1; _employeeList.Add(employee); return employee; } public Employee Update(Employee employeeChanges) { Employee employee = _employeeList.FirstOrDefault(e =&gt; e.Id == employeeChanges.Id); if(employee != null) { employee.Name = employeeChanges.Name; employee.Email = employeeChanges.Email; employee.Departament = employeeChanges.Departament; } return employee; } public Employee Delete(int id) { Employee employee = _employeeList.FirstOrDefault(e =&gt; e.Id == id); if(employee != null) { _employeeList.Remove(employee); } return employee; } } . DI Repository Mockup . //var builder = WebApplication.CreateBuilder(args); builder.Services.AddSingleton&lt;IEmployeeRepository, MockEmployeeRepository&gt;(); //builder.Services.AddControllersWithViews(); . ",
    "url": "/pages/DemoAppMvc/9.%20MockRepository.html",
    "relUrl": "/pages/DemoAppMvc/9.%20MockRepository.html"
  },"69": {
    "doc": "9. Теги",
    "title": "9. Теги",
    "content": "Посмотреть какие теги есть git tag . Создать тег v1.0.0 git tag v1.0.0 повесить тег на коммит где HEAD git tag v1.0.0 xxxx повесить тег на коммит xxxx . Запушить тег в remote-репозиторий git push origin v1.0.0 . Удалить тег локально git tag -d v1.0.0 . Удалить тег из remote git push origin --delete v1.0.0 . Сделать тег с аннотацией git tag -a v1.0.0 xxxx . ",
    "url": "/pages/Git/9.%20Tags.html",
    "relUrl": "/pages/Git/9.%20Tags.html"
  },"70": {
    "doc": "Docker",
    "title": "Docker",
    "content": " ",
    "url": "/leftmenu/900.%20Docker.html",
    "relUrl": "/leftmenu/900.%20Docker.html"
  },"71": {
    "doc": "JekyllApp",
    "title": "JekyllApp",
    "content": " ",
    "url": "/leftmenu/900.%20JekyllApp.html",
    "relUrl": "/leftmenu/900.%20JekyllApp.html"
  },"72": {
    "doc": "Jenkins",
    "title": "Jenkins",
    "content": "Прямая ссылка на http://45.89.52.66:50101/ . sudo systemctl start jenkins.service Запуск sudo systemctl restart jenkins.service Перезапустить sudo systemctl stop jenkins.service Остановить . sudo systemctl status jenkins.service Статус. должно быть active(running) . Поменять порт с 8080 на другой systemctl edit jenkins Добавить [Service] Environment=\"JENKINS_PORT=8081\" . sudo nano /etc/default/jenkins Здесь настройки порта менять не получится. Альтернативы Jenkins Bamboo, CircleCi, Gitlab CICD, Jetbrains Teamcity, Travis . ",
    "url": "/leftmenu/900.%20Jenkins.html",
    "relUrl": "/leftmenu/900.%20Jenkins.html"
  },"73": {
    "doc": "Ubuntu",
    "title": "Создать пару ключей SSH",
    "content": "ssh-keygen Enter Enter . ",
    "url": "/leftmenu/900.%20Ubuntu.html#%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D1%82%D1%8C-%D0%BF%D0%B0%D1%80%D1%83-%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%B9-ssh",
    "relUrl": "/leftmenu/900.%20Ubuntu.html#создать-пару-ключей-ssh"
  },"74": {
    "doc": "Ubuntu",
    "title": "Ubuntu",
    "content": "clear очистить экран cat /etc/os-release версия ОС sudo ufw reset никогда не нажимать . ",
    "url": "/leftmenu/900.%20Ubuntu.html",
    "relUrl": "/leftmenu/900.%20Ubuntu.html"
  },"75": {
    "doc": "901. Docker Курсы/Туториалы",
    "title": "901. Docker Курсы/Туториалы",
    "content": " ",
    "url": "/pages/Docker/901.%20DockerTutorials.html",
    "relUrl": "/pages/Docker/901.%20DockerTutorials.html"
  },"76": {
    "doc": "AdvitGit",
    "title": "AdvitGit",
    "content": "Перед началом работы всегда делается git pull . Работа с локальным репозиторием . git status git add * git commit -m \"Initial\" . История . echo \"aa\" &gt; file.txt # Создать новый файл с текстом аа echo \"aa\" &gt;&gt; file4.txt # Добавить в конец файла текст аа . Показать изменения во всех файлах в предыдущем коммите . git log git log -p ??? git log -1 -p ??? . Вернуть файл в состояние до изменения. Чтобы git status показывал “no changes” . git checkout -- file1.txt . Посмотреть что было добавлено через git add в current commit . git diff --staged . Github SSH . Создать репозиторий через WebGUI гитхаба. git clone ....git echo \"HelloWorld\" &gt; file1.txt git add . git commit -m \"My first\" git push origin . Ветки . В master коммиты не делаются. Только merge. git init myapp git add . git commit -m \"message\" git branch develop #Создание бранчхеда fix_error git checkout develop #Передвинуть HEAD на бранчхед fix_error . Полный рабочий цикл . Ссылка Ветку обычно называют имя-разрабочика_номер-тикета . git checkout -b aq_task001 #Работа с проектом... git add . git commit -m \"Added changes\" git push --set-upstream origin aq_task001 #Со своего гитхаба нажимем кнопку Compare &amp; pull request #Пишем коммент Create Pull Request . Сеньор делает Merge pull request Удаляется бранч локально git branch -d aq_task001 Удаляется бранч удаленно git push origin --delete aq_task001 . Tags . git tags git tag v1.0.1 Создать тег git tag -d v1.0.1 удалить тег локально git push origin --delete v1.0.1 удалить удаленно . ",
    "url": "/pages/Git%20Branching/AdvitGit.html",
    "relUrl": "/pages/Git%20Branching/AdvitGit.html"
  },"77": {
    "doc": "Apache",
    "title": "Apache",
    "content": "sudo systemctl start apache2.service sudo systemctl restart apache2.service . cd /var/www/html/ . sudo systemctl status apache2.service -l --no-pager journalctl -xe . sudo lsof -i:80 sudo lsof -i:443 sudo lsof -i -P -n | grep LISTEN Все порты где есть прослушка . nano /etc/httpd/conf/httpd.conf nano /etc/apache2/ports.conf . sudo ufw app list Должен быть Apache. Если нет, то добавить: sudo ufw allow 'Apache' . Если нет профиля: sudo nano /etc/ufw/applications.d/apache2-utils.ufw.profile . [Apache] title=Web Server description=Apache v2 is the next generation of the omnipresent Apache web server. ports=80/tcp [Apache Secure] title=Web Server (HTTPS) description=Apache v2 is the next generation of the omnipresent Apache web server. ports=443/tcp [Apache Full] title=Web Server (HTTP,HTTPS) description=Apache v2 is the next generation of the omnipresent Apache web server. ports=80,443/tcp . Forbidden 403 . На папке html . find ./ -type d -exec chmod 755 -R {} \\; find ./ -type f -exec chmod 644 {} \\; . Удаление . sudo apt remove apache2 sudo apt-get autoremove . ",
    "url": "/pages/Ubuntu/Apache.html",
    "relUrl": "/pages/Ubuntu/Apache.html"
  },"78": {
    "doc": "Cantor Git",
    "title": "Примеры коммит-мессаджей",
    "content": ". | Примеры Commit Message разработчиков Git | jossbuchea - Semantic Commit Messages | Conventional Commits | Sparkbox - Semantic Commit Messages | Karma Git Commit Msg | . ",
    "url": "/pages/Git%20Branching/CantorGit.html#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B-%D0%BA%D0%BE%D0%BC%D0%BC%D0%B8%D1%82-%D0%BC%D0%B5%D1%81%D1%81%D0%B0%D0%B4%D0%B6%D0%B5%D0%B9",
    "relUrl": "/pages/Git%20Branching/CantorGit.html#примеры-коммит-мессаджей"
  },"79": {
    "doc": "Cantor Git",
    "title": "Cantor Git",
    "content": " ",
    "url": "/pages/Git%20Branching/CantorGit.html",
    "relUrl": "/pages/Git%20Branching/CantorGit.html"
  },"80": {
    "doc": "Dotnet & More",
    "title": "Dotnet & More",
    "content": "#29 DDD . | Паттерны на собесе: GOF, GRASP, Martin Fowler Enterprise Patterns Видео с минутами | Алгоритмы: Задачи на разворот linked list | Книга по DDD Vaugh Vernon: Implementing Domain Driven Design | Jetbrains собес: Алгоритмы, Многопоточночность, книги Танненбаума | . #31 Многопоточность посмотреть позже . #32 Интервью на английском . ",
    "url": "/pages/dotnet/DotnetMore.html",
    "relUrl": "/pages/dotnet/DotnetMore.html"
  },"81": {
    "doc": "Github Actions Minin",
    "title": "Github Actions React",
    "content": "git remote add origin https://github.com/aq-coding/github-actions-react.git git push -u master . Создать руками папку .github/workflows Создать руками testing.yml . Marketplace: Actions . Marketplace/Actions Use the latest version Скопировать . - name: Checkout uses: actions/checkout@v2.6.0 . Несколько джобов параллельно . name: Test React App # Триггер на каждый новый залив on: push jobs: test: runs-on: ubuntu-latest steps: - name: Get repository code uses: actions/checkout@v2.6.0 - name: Install dependencies run: npm install - name: Test application run: npm run test lint: runs-on: ubuntu-latest steps: - name: Get repository code uses: actions/checkout@v2.6.0 - name: Install dependencies run: npm ci - name: Test application run: npm run lint build: runs-on: ubuntu-latest steps: - name: Get repository code uses: actions/checkout@v2.6.0 - name: Install dependencies run: npm ci - name: Test application run: npm run build - name: Deploy run: echo Deploying... Сначала test, потом lint, потом build . name: Test React App # Триггер на каждый новый залив on: push jobs: test: runs-on: ubuntu-latest steps: - name: Get repository code uses: actions/checkout@v2.6.0 - name: Install dependencies run: npm install - name: Test application run: npm run test lint: runs-on: ubuntu-latest needs: test steps: - name: Get repository code uses: actions/checkout@v2.6.0 - name: Install dependencies run: npm ci - name: Test application run: npm run lint build: runs-on: ubuntu-latest needs: lint steps: - name: Get repository code uses: actions/checkout@v2.6.0 - name: Install dependencies run: npm ci - name: Test application run: npm run build - name: Deploy run: echo Deploying... ",
    "url": "/pages/Github%20Actions/grandchildren/GHA%20Minin%201.html#github-actions-react",
    "relUrl": "/pages/Github%20Actions/grandchildren/GHA%20Minin%201.html#github-actions-react"
  },"82": {
    "doc": "Github Actions Minin",
    "title": "Github Actions Minin",
    "content": "Создание репозитория . index.html . git init git add . git commit -m \"init\" . Создать на гитхабе репозиторий github-actions git remote add origin https://github.com/aq-coding/github-actions.git git push -u origin master . Если не работает git push: git remote set-url origin https://новый_токен@github.com/aq-coding/github-actions.git git push -u origin master . Страница создания workflow . https://github.com/aq-coding/github-actions/actions/new . Выбрать set up a workflow yourself github-actions./github/workflows/demo.yml in master . #Имя любое name: Demo Workflow #on какое событие слушать # Ctrl + space список ивентов on: workflow_dispatch jobs: #Имя работы любое print: # Выбор раннера runs-on: ubuntu-latest # Внутри джоба print расписываем шаги: steps: #Имя шага - name: Print to console run: echo Hello GH Actions! . Запуск workflow demo.yml . Actions &gt; Demo Workflow https://github.com/aq-coding/github-actions/actions/workflows/demo.yml Run Workflow . Отработавшие workflows . Actions &gt; All Workflows https://github.com/aq-coding/github-actions/actions . Изменить workflow . Actions &gt; Demo Workflow View workflow file . ",
    "url": "/pages/Github%20Actions/grandchildren/GHA%20Minin%201.html",
    "relUrl": "/pages/Github%20Actions/grandchildren/GHA%20Minin%201.html"
  },"83": {
    "doc": "Github Actions Minin 2",
    "title": "Github Actions React",
    "content": "git remote add origin https://github.com/aq-coding/github-actions-react.git git push -u master . Создать руками папку .github/workflows Создать руками testing.yml . Marketplace: Actions . Marketplace/Actions Use the latest version Скопировать . - name: Checkout uses: actions/checkout@v2.6.0 . Несколько джобов параллельно . name: Test React App # Триггер на каждый новый залив on: push jobs: test: runs-on: ubuntu-latest steps: - name: Get repository code uses: actions/checkout@v2.6.0 - name: Install dependencies run: npm install - name: Test application run: npm run test lint: runs-on: ubuntu-latest steps: - name: Get repository code uses: actions/checkout@v2.6.0 - name: Install dependencies run: npm ci - name: Test application run: npm run lint build: runs-on: ubuntu-latest steps: - name: Get repository code uses: actions/checkout@v2.6.0 - name: Install dependencies run: npm ci - name: Test application run: npm run build - name: Deploy run: echo Deploying... Сначала test, потом lint, потом build . name: Test React App # Триггер на каждый новый залив on: push jobs: test: runs-on: ubuntu-latest steps: - name: Get repository code uses: actions/checkout@v2.6.0 - name: Install dependencies run: npm install - name: Test application run: npm run test lint: runs-on: ubuntu-latest needs: test steps: - name: Get repository code uses: actions/checkout@v2.6.0 - name: Install dependencies run: npm ci - name: Test application run: npm run lint build: runs-on: ubuntu-latest needs: lint steps: - name: Get repository code uses: actions/checkout@v2.6.0 - name: Install dependencies run: npm ci - name: Test application run: npm run build - name: Deploy run: echo Deploying... Последовательно, в одном джобе . name: Test React App on: push jobs: deploy: runs-on: ubuntu-latest steps: - name: Get repository code uses: actions/checkout@v2.6.0 - name: Install dependencies run: npm ci - name: Test application run: npm run test - name: Lint application run: npm run lint - name: Build application run: npm run build - name: Deploy run: echo Deploying... ",
    "url": "/pages/Github%20Actions/grandchildren/GHA%20Minin%202.html#github-actions-react",
    "relUrl": "/pages/Github%20Actions/grandchildren/GHA%20Minin%202.html#github-actions-react"
  },"84": {
    "doc": "Github Actions Minin 2",
    "title": "Github Actions Minin 2",
    "content": " ",
    "url": "/pages/Github%20Actions/grandchildren/GHA%20Minin%202.html",
    "relUrl": "/pages/Github%20Actions/grandchildren/GHA%20Minin%202.html"
  },"85": {
    "doc": "Github Actions Minin 3",
    "title": "Github Actions Minin 3",
    "content": "Contexts &amp; Expressions . В папка .github/workflows создать pull_request.yml . Объект контекста, который называется {{github}} . pull_request.yml . name: Print Pull Request Context #Запуск либо по кнопке либо по пулл-реквесту on: workflow_dispatch: pull_request: types: [opened, edited, reopened] jobs: print: runs-on: ubuntu-latest steps: - name: Print context run: echo $\"{{ toJSON(github.event) }}\" . Зауск только при пуше в master или изменения в какой-то папке . deployment.yaml . on: push: branches: 'master' paths: - '**.js' jobs: . Pull request, . Перейти на вкладку Pull Requests . Выбрать New pull Request . Выбрать base:master &lt;- compare:dev . Выбрать Create pull Request . paths-ignore . Не выполнять джоб если изменения в определенных файлах . on: push: paths-ignore: - '.github/workflows/*' . Marketplace: Cache . uses: actions/cache@v3 . steps: - name: Get repository code uses: actions/checkout@v3 - name: Cache deps uses: actions/cache@v3 with: path: ~/.npm key: node-modules-deps - name: Install dependencies run: npm ci - name: Lint application run: npm run lint . В key можно считать хэш с lock-файла key: node-modules-${{ hashFiles(‘**/package-lock.json’) }} . Матрицы . Параллельно протестировать билды на 14 и 16 ноде и на ubuntu-latest и на windows . strategy: matrix: node-version: [14, 16] os: [ubuntu-latest, windows-latest] . После этого в runs-on можно записать: . runs-on: ${{ matrix.os }} . steps: . | name: Install Node Js uses: actions/setup-node@v3 with: node-version: ${{ matrix.node-version }} | . Разрешить продолжать работаеть если один из элементов матрицы закончился с ошибкой: . build: continue-on-error: true . ",
    "url": "/pages/Github%20Actions/grandchildren/GHA%20Minin%203.html",
    "relUrl": "/pages/Github%20Actions/grandchildren/GHA%20Minin%203.html"
  },"86": {
    "doc": "Github Actions Minin 4",
    "title": "Github Actions Minin 4",
    "content": "Артифакты . Артифакты это билды и тест-репорты Существует отдельный экшн Upload a Build Artifact Download A Build Artifact . name: Build jobs: build: runs-on: ubuntu-latest steps: - name: Get code uses: actions/checkout@v3 - name: Install deps run: npm ci - name: Build project run: npm run build - name: Upload Artifact uses: actions/upload-artifact@v3 with: path: build name: build-files deploy: needs: build runs-on: ubuntu-latest steps: - name: Get build project uses: actions/download-artifact@v3 with: name: build-files . Environment, Секреты . name: Environment on: push: workflow_dispatch: env: NODE_ENV: production GH_SECRET: 42 jobs: build: runs-on: ubuntu-latest steps: - name: Print Env Build run: | echo \"${{ env.NODE_ENV}}\" echo \"${{ env.GH_SECRET}}\" deploy: runs-on: ubuntu-latest steps: - name: Print Env Deploy run: | echo \"${{ env.NODE_ENV }}\" echo \"${{ env.GH_SECRET }}\" . Секреты задаются в настройках репозитория. Один раз настроив, его уже нельзя будет прочитать. ",
    "url": "/pages/Github%20Actions/grandchildren/GHA%20Minin%204.html",
    "relUrl": "/pages/Github%20Actions/grandchildren/GHA%20Minin%204.html"
  },"87": {
    "doc": "Git Flow",
    "title": "Git Flow",
    "content": "Ссылка . Git Flow . main release develop feature/1, feature/2, feature/3 bug/1, bug/2, bug/3 . | Две ветки: Main коммиты в нее делать нельзя Develop коммиты в них делать нельзя | Ветки, в которые делают коммиты Feature/Название_задачи Bug/Название_задачи | Из Feature и Bug коммиты попадают в Develop через Pull Request | Из Develop коммиты попадают в Release/R1 | Из Release попадают в Main. В Main на коммиты ставятся теги. | Иногда из Main созда Github FLow . Лучше подходит для микросервисов main feature . | . ",
    "url": "/pages/Github/GitFlow.html",
    "relUrl": "/pages/Github/GitFlow.html"
  },"88": {
    "doc": "Github Actions Tutorials",
    "title": "Github Actions Tutorials",
    "content": " ",
    "url": "/pages/Github%20Actions/Github%20Actions%20Minin.html",
    "relUrl": "/pages/Github%20Actions/Github%20Actions%20Minin.html"
  },"89": {
    "doc": "Github Actions Nana",
    "title": "Github Actions Nana",
    "content": "Github Actions: Docker Buind &amp; Push . Docker Build &amp; Push Actions . ",
    "url": "/pages/Github%20Actions/GithubActionsNana.html",
    "relUrl": "/pages/Github%20Actions/GithubActionsNana.html"
  },"90": {
    "doc": "Jekyll just-the-docs",
    "title": "Jekyll just-the-docs",
    "content": "jobs: build: runs-on: ubuntu-latest steps: . GitHub Action: Checkout . - name: Checkout uses: actions/checkout@v3 . GitHub Action: Setup Ruby, JRuby and TruffleRuby . - name: Setup Ruby, JRuby and TruffleRuby uses: ruby/setup-ruby@v1.133.0 with: ruby-version: '3.1' bundler-cache: true . GitHub Action: Configure GitHub Pages . - name: Setup Pages id: pages uses: actions/configure-pages@v2.1.3 . RUN Сгенерить html-файлы в папку _site . - name: Build with Jekyll run: bundle exec jekyll build --baseurl \"$\" env: JEKYLL_ENV: production . GitHub Action: Upload GitHub Pages artifact Automatically uploads an artifact from the ‘./_site’ directory by default . - name: Upload GitHub Pages artifact uses: actions/upload-pages-artifact@v1.0.7 . ",
    "url": "/pages/Github%20Actions/Jekyll%20just-the-docs.html",
    "relUrl": "/pages/Github%20Actions/Jekyll%20just-the-docs.html"
  },"91": {
    "doc": "Установка на Ubuntu",
    "title": "Установка на Ubuntu",
    "content": "Прямая ссылка на http://45.89.52.66:50101/login . Инструкция DigitalOcean Инструкция с оф сайта Jenkins . Проверить версии софта на сервере . cat /etc/os-release версия ОС . java -version версия Java. Должна быть 11 ? . sudo lsof -i:8080 занят ли порт 8080. Должен быть свободен. apt remove apache2 если там апач . grep ^ /etc/apt/sources.list /etc/apt/sources.list.d/* Показать sources.list . Репозиторий уже мог быть добавлен. More . Обновление локальных пакетов . sudo apt upgrade sudo apt update sudo apt install ca-certificates . Установка Java . Удалить всю старую джаву. More dpkg-query -W -f='${binary:Package}\\n' | grep -E -e '^(ia32-)?(sun|oracle)-java' -e '^openjdk-' -e '^icedtea' -e '^(default|gcj)-j(re|dk)' -e '^gcj-(.*)-j(re|dk)' -e '^java-common' | xargs sudo apt-get -y remove sudo apt-get -y autoremove . Установить с нуля Java 11 sudo apt-get install openjdk-11-jdk sudo apt-get install fontconfig . Добавить путь к Java nano /etc/environment Прописать JAVA_HOME=\"/usr/lib/jvm/java-1.11.0-openjdk-amd64\" source /etc/environment Перезагрузить echo $JAVA_HOME Проверить всё ли работает . Добавление репозитория jenkins-stable binary . wget -q -O - https://pkg.jenkins.io/debian-stable/jenkins.io.key | sudo apt-key add - Добавление ключа репозитория . sudo sh -c 'echo deb http://pkg.jenkins.io/debian-stable binary/ &gt; /etc/apt/sources.list.d/jenkins.list' Добавление в sources.list . Собственно установка . sudo apt install jenkins . UFW . Проверить, запущен ли UFW sudo ufw status . Ответ должен быть: Когда UFW включен, 8080 открыт, OpenSSH включен Status: active To Action From -- ------ ---- 8080 ALLOW Anywhere OpenSSH ALLOW Anywhere 8080 (v6) ALLOW Anywhere (v6) OpenSSH (v6) ALLOW Anywhere (v6) . Если пустые правила, надо открыть 8080 (Jenkins по умолчанию) и добавить OpenSSH sudo ufw allow 8080 sudo ufw allow OpenSSH sudo ufw enable . curl localhost:8080 должно работать netstat -ntulp | grep 8080 . Первый запуск . Прямая ссылка на http://45.89.52.66:50101/login cat /var/lib/jenkins/secrets/initialAdminPassword выставить. Установить Suggested. Настройка языка . http://45.89.52.66:50101/ Ctrl+F “Locale” Default Language: en Ignore browser preference . ",
    "url": "/pages/Jenkins/grandchildren/JenkinsInstallOnUbuntu.html",
    "relUrl": "/pages/Jenkins/grandchildren/JenkinsInstallOnUbuntu.html"
  },"92": {
    "doc": "Jenkins Installation",
    "title": "Jenkins Installation",
    "content": " ",
    "url": "/pages/Jenkins/JenkinsInstallation.html",
    "relUrl": "/pages/Jenkins/JenkinsInstallation.html"
  },"93": {
    "doc": "Jenkins Jobs Adv",
    "title": "Jenkins jobs",
    "content": "New Item Прямая ссылка на http://45.89.52.66:50101/newJob . ",
    "url": "/pages/Jenkins/JenkinsJobsAdv.html#jenkins-jobs",
    "relUrl": "/pages/Jenkins/JenkinsJobsAdv.html#jenkins-jobs"
  },"94": {
    "doc": "Jenkins Jobs Adv",
    "title": "Adv1",
    "content": "Установить плагин Publish over SSH . Джоб 1 . New Item - Freestyle project Item name: MyJobNumber-1 Description: Adv1 first job . Разрешить выполнять несколько билдов одновременно: . | Execute concurent builds if necessary | . Удалять старые билды из папки cd /var/lib/jenkins/jobs/ИмяДжоба/builds : . | Discard old builds Обычно ставят max of builds to keep: 5 | . Build: Execute shell: . echo \"HelloWorld!\" echo \"This is Build number: $BUILD_NUMBER\" pwd sleep 5 whoami echo \"Name of this Build is: $BUILD_DISPLAY_NAME\" . Каждый запуск создает директорию в: . cd /var/lib/jenkins/jobs ll . Job 3 . New Item - Freestyle project Discard old builds: Max of builds: 5 . | Execute concurrent | . Build: Execute Shell: . echo \"==========Build Started==========\" cat &lt;&lt;EOF &gt;&gt; index.html &lt;html&gt; &lt;body bgcolor=black&gt; &lt;center&gt; &lt;h2&gt;&lt;font color=yellow&gt;Hello Job&lt;/font&gt;&lt;/h2&gt; &lt;font color=blue&gt;Job&lt;/font&gt; &lt;/center&gt; &lt;/body &lt;/html&gt; EOF echo \"==========Build Finished==========\" . Execute Shell: . echo \"==========Test Started==========\" result=`grep \"Hello\" index.html | wc -l` echo $result if [ \"$result\" = \"1\" ] then echo \"Test Passed\" exit 0 else echo \"Test Failed\" exit 1 fi echo \"==========Test Finished==========\" . Execute Shell: . echo \"==========Deployment Started==========\" . Post-build Action Send build artifacts over SSH: Source files /* Remote directory ` ` Exec command sudo service httpd restart . ",
    "url": "/pages/Jenkins/JenkinsJobsAdv.html#adv1",
    "relUrl": "/pages/Jenkins/JenkinsJobsAdv.html#adv1"
  },"95": {
    "doc": "Jenkins Jobs Adv",
    "title": "Jenkins Jobs Adv",
    "content": " ",
    "url": "/pages/Jenkins/JenkinsJobsAdv.html",
    "relUrl": "/pages/Jenkins/JenkinsJobsAdv.html"
  },"96": {
    "doc": "Jenkins Plugins",
    "title": "Publish over SSH",
    "content": "Добавление удаленного сервера . Manager Jenkins &gt; Configure Systems Publish over SSH . Key Name: Любое имя Hostname: ip-адрес Username: Remote directory: /var/www/html . Test Configurations . Настройки шага джоба . Post-build Action Send build artifacts over SSH: Source files /* Remote directory Exec command sudo service httpd restart . ",
    "url": "/pages/Jenkins/JenkinsPlugins.html#publish-over-ssh",
    "relUrl": "/pages/Jenkins/JenkinsPlugins.html#publish-over-ssh"
  },"97": {
    "doc": "Jenkins Plugins",
    "title": "Jenkins Plugins",
    "content": " ",
    "url": "/pages/Jenkins/JenkinsPlugins.html",
    "relUrl": "/pages/Jenkins/JenkinsPlugins.html"
  },"98": {
    "doc": "JenkinsSem",
    "title": "JenkinsSem",
    "content": " ",
    "url": "/pages/Jenkins/JenkinsSem.html",
    "relUrl": "/pages/Jenkins/JenkinsSem.html"
  },"99": {
    "doc": "Manage Jenkins",
    "title": "Изменить цвет результата маркера билда",
    "content": "Green Balls не работает . ",
    "url": "/pages/Jenkins/grandchildren/ManageJenkins.html#%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C-%D1%86%D0%B2%D0%B5%D1%82-%D1%80%D0%B5%D0%B7%D1%83%D0%BB%D1%8C%D1%82%D0%B0%D1%82%D0%B0-%D0%BC%D0%B0%D1%80%D0%BA%D0%B5%D1%80%D0%B0-%D0%B1%D0%B8%D0%BB%D0%B4%D0%B0",
    "relUrl": "/pages/Jenkins/grandchildren/ManageJenkins.html#изменить-цвет-результата-маркера-билда"
  },"100": {
    "doc": "Manage Jenkins",
    "title": "Manage Jenkins",
    "content": "Configure System . # of excutors: 4 Usage: только .net Jenkins URL: Поставить 8081 Usage Statistics: Отключить Save . Configure Global Security . Authorization: Logged-in users can do anything . | Allow anonymous read access | . Установка обновления . cd /usr/share/jenkins Скачать в эту папку sudo mv jenkins.war jenkins_новая_директория ll sudo service jenkins restart . ",
    "url": "/pages/Jenkins/grandchildren/ManageJenkins.html",
    "relUrl": "/pages/Jenkins/grandchildren/ManageJenkins.html"
  },"101": {
    "doc": "Manage Plugins",
    "title": "Manage Plugins",
    "content": "Установка плагинов . http://45.89.52.66:50101/pluginManager/ http://45.89.52.66:50101/pluginManager/available/ При установка плагина желательно поставить галку . | Restart Jenkins when installation После установки плагина желательно делать sudo service jenkins restart | . ",
    "url": "/pages/Jenkins/grandchildren/ManagePlugins.html",
    "relUrl": "/pages/Jenkins/grandchildren/ManagePlugins.html"
  },"102": {
    "doc": "Marketplace",
    "title": "Marketplace",
    "content": "Checkout . jobs: build: runs-on: ubuntu-latest steps: . - name: Checkout uses: actions/checkout@v3 . ",
    "url": "/pages/Github%20Actions/Marketplace.html",
    "relUrl": "/pages/Github%20Actions/Marketplace.html"
  },"103": {
    "doc": "Putty",
    "title": "Putty",
    "content": "Для того чтобы не рвалось соединения в Connection поставить Seconds between keepalives 30 . ",
    "url": "/pages/Ubuntu/Putty.html",
    "relUrl": "/pages/Ubuntu/Putty.html"
  },"104": {
    "doc": "TShock",
    "title": "TShock",
    "content": " ",
    "url": "/pages/Ubuntu/TShock.html",
    "relUrl": "/pages/Ubuntu/TShock.html"
  },"105": {
    "doc": "UFW",
    "title": "UFW",
    "content": "https://askubuntu.com/questions/541675/ufw-is-blocking-all-even-when-i-set-rules-to-allow sudo ufw status verbose . sudo iptables -L -v -n Посмотреть iptables sudo nano /etc/default/ufw Конфигурация UFW (включить выключить IPV6=YES) sudo nano /etc/ufw/sysctl.conf Конфигурация UFW . ufw reset никогда не нажимать . ufw enable вкл ufw disable вкл ufw Reload . Базовая настройка UFW . Проверить чтобы стояло IPV6=yes . sudo nano /etc/default/ufw . Запретить все входящие, разрешить все исходящие . sudo ufw default deny incoming . sudo ufw default allow outgoing . Разрешить входящие ssh . sudo ufw allow ssh sudo ufw allow 500,4500/udp sudo ufw allow 7777/tcp sudo ufw allow 8080/tcp sudo ufw allow 9418/tcp sudo ufw allow 80/tcp sudo ufw allow 443/tcp . Включить . sudo ufw enable . Дальше . Если надо удалить правило: . sudo ufw status numbered . sudo ufw delete 2 . IKEV2 Восстановление . ip route show default . sudo ufw allow 500,4500/udp . sudo nano /etc/ufw/before.rules . Добавить перед *filter (интерфейс ens3) . *nat -A POSTROUTING -s 10.10.10.0/24 -o ens3 -m policy --pol ipsec --dir out -j ACCEPT -A POSTROUTING -s 10.10.10.0/24 -o ens3 -j MASQUERADE COMMIT *mangle -A FORWARD --match policy --pol ipsec --dir in -s 10.10.10.0/24 -o ens3 -p tcp -m tcp --tcp-flags SYN,RST SYN -m tcpmss --mss 1361:1536 -j TCPMSS --set-mss 1360 COMMIT . Добавить после #End required lines (секции *filters) . -A ufw-before-forward --match policy --pol ipsec --dir in --proto esp -s 10.10.10.0/24 -j ACCEPT -A ufw-before-forward --match policy --pol ipsec --dir out --proto esp -d 10.10.10.0/24 -j ACCEPT . Дальше . sudo nano /etc/ufw/sysctl.conf . В конец файла . net/ipv4/ip_forward=1 net/ipv4/conf/all/accept_redirects=0 net/ipv4/conf/all/send_redirects=0 net/ipv4/ip_no_pmtu_disc=1 . sudo systemctl restart strongswan-starter . Всё! . Проверка iptables . iptables -L -v -n . Поставить IPV6=NO а потом вернуть . sudo nano /etc/default/ufw . Удалить все правила UFW из iptables . for i in `iptables -L INPUT --line-numbers |grep '[0-9].*ufw' | cut -f 1 -d ' ' | sort -r `; do iptables -D INPUT $i ; done for i in `iptables -L FORWARD --line-numbers |grep '[0-9].*ufw' | cut -f 1 -d ' ' | sort -r `; do iptables -D FORWARD $i ; done for i in `iptables -L OUTPUT --line-numbers |grep '[0-9].*ufw' | cut -f 1 -d ' ' | sort -r `; do iptables -D OUTPUT $i ; done for i in `iptables -L | grep 'Chain .*ufw' | cut -d ' ' -f 2`; do iptables -X $i ; done . Грохнуть iptables . iptables -F . ",
    "url": "/pages/Ubuntu/UFW.html#ufw",
    "relUrl": "/pages/Ubuntu/UFW.html#ufw"
  },"106": {
    "doc": "UFW",
    "title": "UFW",
    "content": "Выяснить почему не работает IPV6=yes . ",
    "url": "/pages/Ubuntu/UFW.html",
    "relUrl": "/pages/Ubuntu/UFW.html"
  },"107": {
    "doc": "UbuntuConfig",
    "title": "UbuntuConfig",
    "content": "Базовая настройка UFW и IEv2 . sudo apt update sudo apt install strongswan strongswan-pki libcharon-extra-plugins libcharon-extauth-plugins . mkdir -p ~/pki/{cacerts,certs,private} chmod 700 ~/pki . Проверить чтобы стояло IPV6=yes . sudo nano /etc/default/ufw . Запретить все входящие, разрешить все исходящие . sudo ufw default deny incoming . sudo ufw default allow outgoing . Разрешить входящие ssh . sudo ufw allow ssh sudo ufw allow 500,4500/udp sudo ufw allow 7777/tcp sudo ufw allow 8080/tcp sudo ufw allow 9418/tcp sudo ufw allow 80/tcp sudo ufw allow 443/tcp . Включить . sudo ufw enable . ",
    "url": "/pages/Ubuntu/UbuntuConfig.html",
    "relUrl": "/pages/Ubuntu/UbuntuConfig.html"
  },"108": {
    "doc": "Amichai",
    "title": "Создать проекты, добавить пакеты",
    "content": ". | Blank Solution . | Создать проекты . | src/ | src/Web (Empty .Net) | src/Presentation (Class Library) | src/Infrastructure (Class Library) | src/Application (Class Library) | src/Domain (Class Library) | requests (Shared Project) | docs (Shared Project) | . | Удалить везде Class1.cs . | Добавить везде референсы | . | Web | Presentation | Infrastructure | Application | . | Presentation | Web | Application | Domain | . | Infrastructure | Infrastructure |   |   | . | Application | Application |   |   | . ",
    "url": "/pages/dotnet/amichai/amichai.html#%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D1%82%D1%8C-%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D1%8B-%D0%B4%D0%BE%D0%B1%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D1%8B",
    "relUrl": "/pages/dotnet/amichai/amichai.html#создать-проекты-добавить-пакеты"
  },"109": {
    "doc": "Amichai",
    "title": "Добавить файлы",
    "content": ". | Web - Contracts - v1 - Authentication - Requests - RegisterRequest.cs - LoginRequest.cs - Responses - SuccessResponse.cs - FailedResponse.cs - Posts - Requests - CreatePostRequest.cs - UpdatePostRequest.cs - Responses - PostResponse.cs - ApiRoutes.cs - Options - ApiSwaggerOptions.cs - DependencyInjection.cs | Presentation - Controllers - v1 - AuthenticationController.cs - PostsController.cs - TagsController.cs - ErrorController.cs | Infrastructure - Authentication - JwtSettings.cs - JwtTokenGenerator.cs - Persistence - UserRepository.cs - Services - DateTimeProvider.cs - DependencyInjection.cs | Application - Authentication - Commands - Register - RegisterCommand.cs - RegisterCommandHandler.cs - Common - AuthenticationResult.cs - Queries - Login - LoginQuery.cs - LoginQueryHandler.cs - Common - Interfaces - Authentication - IJwtTokenGenerator.cs - Services - IDateTimeProvider.cs - Persistence - IUserRepository.cs - DependencyInjection.cs | Domain - Entities - User.cs | . ",
    "url": "/pages/dotnet/amichai/amichai.html#%D0%B4%D0%BE%D0%B1%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D1%84%D0%B0%D0%B9%D0%BB%D1%8B",
    "relUrl": "/pages/dotnet/amichai/amichai.html#добавить-файлы"
  },"110": {
    "doc": "Amichai",
    "title": "Добавить пакеты",
    "content": "| Presentation | Infrastructure | Application |———–|—————-|————-| System.Configuration.ConfigurationManager | Microsoft.Extensions.Configuration | Microsoft.Extensions.DependencyInjection |Swashbuckle.AspNetCore | Microsoft.Extensions.Options.ConfigurationExtension |MediatR| Microsoft.AspNetCore.Identity.EntityFrameworkCore | Microsoft.EntityFrameworkCore.SqlServer | MediatR.Extensions.Microsoft.DependencyInjection | - | Microsoft.EntityFrameworkCore.Tools | - | - | Microsoft.AspNetCore.Identity.EntityFrameworkCore | - | - | System.IdentityModel.Tokens.Jwt | - | . ",
    "url": "/pages/dotnet/amichai/amichai.html#%D0%B4%D0%BE%D0%B1%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D1%8B",
    "relUrl": "/pages/dotnet/amichai/amichai.html#добавить-пакеты"
  },"111": {
    "doc": "Amichai",
    "title": "Код",
    "content": "Dependency Injection . Web/DependencyInjection.cs . public static IServiceCollection AddPresentation(this IServiceCollection services) { services.AddIdentity&lt;IdentityUser, IdentityRole&gt;(options =&gt; { options.Password.RequireDigit = false; options.Password.RequireNonAlphanumeric = false; options.Password.RequireUppercase = false; options.Password.RequiredLength = 6; }) .AddRoles&lt;IdentityRole&gt;() .AddEntityFrameworkStores&lt;ApplicationDbContext&gt;(); services.AddSwaggerGen(x =&gt; { x.SwaggerDoc(\"v1\", new Microsoft.OpenApi.Models.OpenApiInfo {Title=\"My Api\", Version=\"v1\" }); }); return services; } . Infrastructure/DependencyInjection.cs ``` csharp public static IServiceCollection AddInfrastructure(this IServiceCollection services, ConfigurationManager config) { return services; } ``` Application/DependencyInjection.cs ```csharp public static IServiceCollection AddApplication(this IServiceCollection services) { services.AddMediatR(typeof(DependencyInjection).Assembly); return services; } ``` Web/Program.cs ```csharp var builder = WebApplication.CreateBuilder(args); { builder.Services.AddApplication(); builder.Services.AddInfrastructure(builder.Configuration); builder.Services.AddPresentation(); builder.Services.AddControllers(); } var app = builder.Build(); { app.UseHttpsRedirection(); Assembly presentationAssembly = typeof(Presentation.AssemblyReference).Assembly; app.MapControllers().AddApplicationPart(presentationAssembly); app.Run(); } ``` DateTime Provider . Application . Common/Services/IDateTimeProvider.cs ```csharp public interface IDateTimeProvider { DateTime UtcNow { get; } } ``` Infrastructure . Services/DateTimeProvider.cs ```csharp public class DateTimeProvider : IDateTimeProvider { public DateTime UtcNow =&gt; DateTime.UtcNow; } ``` DependencyInjection.cs Добавить ```csharp services.AddSingleton&lt;IDateTimeProvider, DateTimeProvider&gt;(); ``` DbContext &amp; Unit of Work . Web . appsettings.json ```json \"ConnectionStrings\": { \"DefaultConnection\": \"Data Source=(localdb)\\\\MSSQLLocalDB;Initial Catalog=Portfolio2022;Integrated Security=True; Connect Timeout=30;Encrypt=False;TrustServerCertificate=False;ApplicationIntent=ReadWrite;MultiSubnetFailover=False\" } ``` Infrastructure . Persistence/ApplicationDbContext.cs ```csharp public class ApplicationDbContext : IdentityDbContext { public ApplicationDbContext(DbContextOptions options) : base(options) { } public DbSet Users { get; set; } public DbSet Posts { get; set; } } ``` &lt;/details&gt; Persistence/UnitOfWork.cs ```csharp public sealed class UnitOfWork : IUnitOfWork { private readonly ApplicationDbContext _ctx; public UnitOfWork(ApplicationDbContext ctx) { _ctx = ctx; } public Task SaveChangesAsync(CancellationToken cancellationToken = default) { return _ctx.SaveChangesAsync(cancellationToken); } } ``` DependencyInjection.cs ```csharp public static IServiceCollection AddInfrastructure(this IServiceCollection services, IConfiguration configuration) { services.AddDbContext(options =&gt; options.UseSqlServer(configuration[\"DefaultConnection\"])); } ``` &lt;/details&gt; **Application** Persistence/IUnitOfWork.cs ```csharp ``` ### Identity **Web** Program.cs ```csharp var builder = WebApplication.CreateBuilder(args); { builder.Services.AddIdentity&lt;IdentityUser, IdentityRole&gt;(options =&gt; { options.Password.RequireDigit = false; options.Password.RequireNonAlphanumeric = false; options.Password.RequireUppercase = false; options.Password.RequiredLength = 6; }) .AddRoles() .AddEntityFrameworkStores(); } var app = builder.Build(); { { IServiceScope scope = app.Services.CreateScope(); ApplicationDbContext ctx = scope.ServiceProvider.GetRequiredService(); UserManager userManager = scope.ServiceProvider.GetRequiredService&lt;UserManager&gt;(); RoleManager roleManager = scope.ServiceProvider.GetRequiredService&lt;RoleManager&gt;(); ctx.Database.EnsureCreated(); IdentityRole adminRole = new IdentityRole(\"Admin\"); if (!ctx.Roles.Any()) { roleManager.CreateAsync(adminRole).GetAwaiter().GetResult(); } if (!ctx.Users.Any(u =&gt; u.UserName == \"admin\")) { IdentityUser adminUser = new IdentityUser { UserName = \"admin\", Email = \"admin@example.com\" }; userManager.CreateAsync(adminUser, \"P@ssword123!\").GetAwaiter().GetResult(); userManager.AddToRoleAsync(adminUser, adminRole.Name).GetAwaiter().GetResult(); } } } ``` &lt;/details&gt; ### User Repository **Domain** Aggregates/User.cs ```csharp public class User { public Guid Id { get; set; } = Guid.NewGuid(); public string FirstName { get; set; } = null!; public string LastName { get; set; } = null!; public string Email { get; set; } = null!; public string Password { get; set; } = null!; } ``` **Application** Persistence/IUserRepository.cs ```csharp public interface IUserRepository { User? GetUserByEmail(string email); void Add(User user); } ``` **Infrastructure** Persistence/UserRepository.cs ```csharp public class UserRepository : IUserRepository { private static readonly List _users = new(); public User? GetUserByEmail(string email) { return _users.SingleOrDefault(u =&gt; u.Email == email); } public void Add(User user) { _users.Add(user); } } ``` &lt;/details&gt; DependencyInjection.cs ```csharp public static class DependencyInjection { public static IServiceCollection AddInfrastructure(this IServiceCollection services) { services.AddScoped&lt;IUserRepository, UserRepository&gt;(); return services; } } ``` ### Post Repository **Domain** Entities/Post.cs ```csharp public class Post : Entity { public DateTime CreationDate { get; set; } public string Author { get; set; } public string Title { get; set; } public string Content { get; set; } public DateTime? DisplayUntil { get; set; } public string UserId { get; set; } public virtual ICollection Tags { get; set; } } ``` &lt;/details&gt; Entities/Tag.cs ```csharp public class Tag : Entity { public string Text { get; set; } public int? PostId { get; set; } [ForeignKey(nameof(PostId))] public Post Post { get; set; } } ``` &lt;/details&gt; Entities/IPostService.cs ```csharp public interface IPostService : ITweetbookAppService&lt;Post,int&gt; { Task&lt;IEnumerable&gt; GetTagsByPostAsync(int postId); Task CreatePostTagAsync(Tag tag); } ``` &lt;/details&gt; Entities/PostService.cs ```csharp public class PostService : TweetbookAppService, IPostService { //private readonly IHttpContextAccessor _httpContextAccessor; //public PostService(DataContext dataContext, IHttpContextAccessor httpContextAccessor) : base(dataContext) //{ // _httpContextAccessor = httpContextAccessor; //} public PostService(DataContext dataContext) : base(dataContext) {} public override async Task UpdateAsync(Post item) { CheckInstanceAvailability(); var itemToUpdate = await GetByIdAsync(item.Id); if (itemToUpdate == null) return await Task.FromResult(false); //The infrastructure evaluates for us via PostOwnershipValidationFilter where applied //But what if the developer forgets to decorate the endpoint with the attribute aforementioned? //In this case, uncomment the line below or adopt a better coding strategy* //if (!CurrentUserIsOwner(itemToUpdate.UserId)) // return await Task.FromResult(false); //*throw new SecurityException(\"Access denied to the request resource or operation\") //DataContext.Set().Update(item); //See next line below //https://stackoverflow.com/questions/7106211/entity-framework-why-explicitly-set-entity-state-to-modified item.UserId = itemToUpdate.UserId; DataContext.Entry(itemToUpdate).CurrentValues.SetValues(item); var updated = await DataContext.SaveChangesAsync() &gt; 0; return await Task.FromResult(updated); } public override async Task RemoveAsync(int id) { CheckInstanceAvailability(); var itemToRemove = await GetByIdAsync(id); if (itemToRemove != null) { //The infrastructure evaluates for us via PostOwnershipValidationFilter where applied //But what if the developer forgets to decorate the endpoint with the attribute aforementioned? //In this case, uncomment the line below or adopt a better coding strategy* //if (!CurrentUserIsOwner(itemToRemove.UserId)) // return await Task.FromResult(false); //*throw new SecurityException(\"Access denied to the request resource or operation\") DataContext.Entry(itemToRemove).State = EntityState.Deleted; await DataContext.SaveChangesAsync(); } return await Task.FromResult(true); } public async Task&lt;IEnumerable&gt; GetTagsByPostAsync(int postId) { //TODO: Implement get tags by post id method CheckInstanceAvailability(); return await Task.FromResult(Enumerable.Empty()); } public async Task CreatePostTagAsync(Tag tag) { CheckInstanceAvailability(); var relatedPost = await GetByIdAsync(tag.PostId.Value); if (relatedPost != null) { await DataContext.Tags.AddAsync(tag); var created = await DataContext.SaveChangesAsync() &gt; 0; return await Task.FromResult(created ? tag : null); } return await Task.FromResult((Tag)null); } //The infrastructure evaluates for us via PostOwnershipValidationFilter where applied //private bool CurrentUserIsOwner(string postUserId) =&gt; string.Equals(_httpContextAccessor.HttpContext.GetCurrentUserId(), postUserId, StringComparison.Ordinal); } ``` &lt;/details&gt; Entities/IAppService.cs ```csharp public interface ITweetbookAppService&lt;T, TKey&gt; where T : class { Task GetByIdAsync(TKey id); Task&lt;IEnumerable&gt; GetAllAsync(); Task CreateAsync(T item); Task UpdateAsync(T item); Task RemoveAsync(TKey id); } ``` &lt;/details&gt; Entities/AppService.cs ```csharp public abstract class TweetbookAppService : ITweetbookAppService&lt;T, int&gt; where T : Entity { protected DataContext DataContext { get; private set; } public TweetbookAppService(DataContext dataContext) { DataContext = dataContext; } public async virtual Task&lt;IEnumerable&gt; GetAllAsync() { CheckInstanceAvailability(); return await Task.FromResult(DataContext.Set().ToImmutableList()); } public async virtual Task GetByIdAsync(int id) { CheckInstanceAvailability(); return await DataContext.Set().FirstOrDefaultAsync(it =&gt; it.Id == id); } public async virtual Task CreateAsync(T item) { CheckInstanceAvailability(); await DataContext.Set().AddAsync(item); var created = await DataContext.SaveChangesAsync() &gt; 0; return await Task.FromResult(created); } public async virtual Task RemoveAsync(int id) { CheckInstanceAvailability(); var itemToRemove = await GetByIdAsync(id); if (itemToRemove != null) { DataContext.Entry(itemToRemove).State = EntityState.Deleted; await DataContext.SaveChangesAsync(); } return await Task.FromResult(true); } public async virtual Task UpdateAsync(T item) { CheckInstanceAvailability(); //DataContext.Set().Update(item); var itemToUpdate = await DataContext.Set().SingleOrDefaultAsync(it =&gt; it.Id == item.Id); if (itemToUpdate == null) return await Task.FromResult(false); //https://stackoverflow.com/questions/7106211/entity-framework-why-explicitly-set-entity-state-to-modified DataContext.Entry(itemToUpdate).CurrentValues.SetValues(item); var updated = await DataContext.SaveChangesAsync() &gt; 0; return await Task.FromResult(updated); } #region IDisposable Support private bool disposedValue = false; // To detect redundant calls protected virtual void Dispose(bool disposing) { if (!disposedValue) { if (disposing) { if (DataContext != null) DataContext.Dispose(); } // TODO: free unmanaged resources (unmanaged objects) and override a finalizer below. // TODO: set large fields to null. disposedValue = true; } } ~TweetbookAppService() { Dispose(false); } public void Dispose() { Dispose(true); GC.SuppressFinalize(this); } #endregion protected void CheckInstanceAvailability() { if (disposedValue) throw new ObjectDisposedException(\"This service instance was disposed and is no longer available!\"); } } ``` &lt;/details&gt; ### Authentication **Web** Contracts/v1/Authentication/Requests/RegisterRequest.cs ```csharp public record RegisterRequest( string FirstName, string LastName, string Email, string Password); ``` Contracts/v1/Authentication/Requests/LoginRequest.cs ```csharp public record LoginRequest( string Email, string Password); ``` Contracts/v1/Authentication/Responses/SuccessResponse.cs ```csharp public record SuccessResponse( Guid Id, string FirstName, string LastName, string Email, string Token); ``` Contracts/v1/Authentication/Responses/FailedResponse.cs ```csharp public class FailedResponse { } ``` **Application** Authentication/Common/AuthenticationResult.cs ```csharp public record AuthenticationResult( User User, string Token); ``` Authentication/Commands/Register/RegisterCommand.cs ```csharp public record RegisterCommand( string FirstName, string LastName, string Email, string Password) : IRequest; ``` &lt;/details&gt; Authentication/Commands/Register/RegisterCommandHandler.cs ```csharp public class RegisterCommandHandler : IRequestHandler&lt;RegisterCommand, AuthenticationResult&gt; { private readonly IJwtTokenGenerator _jwttokengenerator; private readonly IUserRepository _userRepository; public RegisterCommandHandler(IJwtTokenGenerator jwtTokenGenerator, IUserRepository userRepository) { _jwttokengenerator = jwtTokenGenerator; _userRepository = userRepository; } public async Task Handle(RegisterCommand command, CancellationToken cancellationToken) { if (_userRepository.GetUserByEmail(command.Email) is not null) { throw new Exception(\"User with given email already exists\"); } var user = new User { FirstName = command.FirstName, LastName = command.LastName, Email = command.Email, Password = command.Password }; _userRepository.Add(user); Guid userId = Guid.NewGuid(); var token = _jwttokengenerator.GenerateToken(user); return new AuthenticationResult( user, token); } } ``` &lt;/details&gt; Authentication/Queries/Login/LoginQuery.cs ```csharp public record LoginQuery(string Email, string Password) : IRequest; ``` &lt;/details&gt; Authentication/Queries/Login/LoginQueryHandler.cs ```csharp public class LoginQueryHandler : IRequestHandler&lt;LoginQuery, AuthenticationResult&gt; { private readonly IJwtTokenGenerator _jwttokengenerator; private readonly IUserRepository _userRepository; public LoginQueryHandler(IJwtTokenGenerator jwtTokenGenerator, IUserRepository userRepository) { _jwttokengenerator = jwtTokenGenerator; _userRepository = userRepository; } public async Task Handle(LoginQuery query, CancellationToken cancellationToken) { if (_userRepository.GetUserByEmail(query.Email) is not User user) { throw new Exception(\"User with given email does not exist\"); } if (user.Password != query.Password) { throw new Exception(\"Invalid password\"); } var token = _jwttokengenerator.GenerateToken(user); return new AuthenticationResult( user, token); } } ``` &lt;/details&gt; **Presentation** Controllers/v1/AuthenticationController.cs ```csharp [ApiController] [Route(\"auth\")] public class AuthenticationController : ControllerBase { private readonly ISender _mediator; public AuthenticationController( IMediator mediator) { _mediator = mediator; } [HttpPost(\"register\")] public async Task Register(RegisterRequest request) { var command = new RegisterCommand(request.FirstName, request.LastName, request.Email, request.Password); var authResult = await _mediator.Send(command); var authResponse = new SuccessResponse( authResult.User.Id, authResult.User.FirstName, authResult.User.LastName, authResult.User.Email, authResult.Token); return Ok(request); } [HttpPost(\"login\")] public async Task Login(LoginRequest request) { var query = new LoginQuery(request.Email, request.Password); var authResult = await _mediator.Send(query); var authResponse = new SuccessResponse( authResult.User.Id, authResult.User.FirstName, authResult.User.LastName, authResult.User.Email, authResult.Token); return Ok(request); } } ``` &lt;/details&gt; ### Swagger **Web** appsettings.Development ```json \"ApiSwaggerOptions\": { \"JsonRoute\": \"swagger/{documentName}/swagger.json\", \"Description\": \"Our API\", \"UIEndpoint\": \"v1/swagger.json\" } ``` Options/ApiSwaggerOptions.cs ```csharp public record ApiSwaggerOptions( string JsonRoute = null!, string UiEndpoint = null!, string Description = null!); ``` DependencyInjection.cs ```csharp services.AddSwaggerGen(x =&gt; { x.SwaggerDoc(\"v1\", new Microsoft.OpenApi.Models.OpenApiInfo { Title = \"Api\", Version = \"v1\" }); }); ``` Program.cs Добавить ```csharp var swaggerOptions = new ApiSwaggerOptions(); builder.Configuration.GetSection(nameof(ApiSwaggerOptions)) .Bind(swaggerOptions); app.UseSwagger(option =&gt; { option.RouteTemplate = swaggerOptions.JsonRoute; }); app.UseSwaggerUI(option =&gt; { option.SwaggerEndpoint(swaggerOptions.UiEndpoint, swaggerOptions.Description); }); ``` ### JWT ## Тесты - Создать проекты - tests/ - tests/**Architecture.Tests** ## Другое - В корне создать dockerfile ```dockerfile FROM httpd:alpine COPY ./html/ /usr/local/apache2/htdocs/ ``` - Докер bash-команды `docker images` `docker build -t hello-docker:1.0.0 .` - http-запросы VS Code **requests**/Authentication/Register.http ```http @host=https://localhost:7056 POST /auth/register Content-type: application/json { \"firstName\": \"Anton\", \"lastName\": \"K\", \"email\": \"ak@example.com\", \"password\": \"P@ssword123!\" } ``` **requests**/Authentication/Login.http ```http @host=https://localhost:7056 POST /auth/login Content-type: application/json { \"email\": \"ak@example.com\", \"password\": \"P@ssword123!\" } ``` - Установка сервисов ASP.NET через Assembly IInstaller.cs ```csharp public interface IInstaller { void InstallServices(IServiceCollection services, IConfiguration configuration); } ``` InstallerExtensions.cs ```csharp public static class InstallerExtensions { //Вызвать в services Program.cs public static void InstallServicesInAssembly(this IServiceCollection services, IConfiguration configuration) { var installers = typeof(Program).Assembly.ExportedTypes.Where(x =&gt; typeof(IInstaller).IsAssignableFrom(x) &amp;&amp; !x.IsInterface &amp;&amp; !x.IsAbstract) //Найти все классы реализующие IInstaller, которые не интерфейсы и не абстрактные .Select(Activator.CreateInstance) //Создать экземпляр каждого .Cast() //Привести к типу IInstaller .ToList(); //Сделать List installers.ForEach(installer =&gt; installer.InstallServices(services, configuration)); } } ``` &lt;/details&gt; ",
    "url": "/pages/dotnet/amichai/amichai.html#%D0%BA%D0%BE%D0%B4",
    "relUrl": "/pages/dotnet/amichai/amichai.html#код"
  },"112": {
    "doc": "Amichai",
    "title": "Amichai",
    "content": " ",
    "url": "/pages/dotnet/amichai/amichai.html",
    "relUrl": "/pages/dotnet/amichai/amichai.html"
  },"113": {
    "doc": "Interview questions",
    "title": "Interview questions",
    "content": " ",
    "url": "/pages/dotnet/interview/interview.html",
    "relUrl": "/pages/dotnet/interview/interview.html"
  },"114": {
    "doc": "ASP.NET Razor Views Project",
    "title": "Developer Command Prompt for VS 2022",
    "content": "VsDevCmd.bat dotnet --help Все команды CLI dotnet dotnet run Запуск проекта . ",
    "url": "/pages/dotnet/razorviews/razorviews.html#developer-command-prompt-for-vs-2022",
    "relUrl": "/pages/dotnet/razorviews/razorviews.html#developer-command-prompt-for-vs-2022"
  },"115": {
    "doc": "ASP.NET Razor Views Project",
    "title": "ASP.NET Razor Views Project",
    "content": " ",
    "url": "/pages/dotnet/razorviews/razorviews.html",
    "relUrl": "/pages/dotnet/razorviews/razorviews.html"
  },"116": {
    "doc": "Richter",
    "title": "Добавить в PATH:",
    "content": "csc.exe: C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319 (Из этой директории компилятор достает MSCorLib.dll) ildasm, gacutil: C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v10.0A\\bin\\NETFX 4.8 Tools . ",
    "url": "/pages/dotnet/richter/richter.html#%D0%B4%D0%BE%D0%B1%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-%D0%B2-path",
    "relUrl": "/pages/dotnet/richter/richter.html#добавить-в-path"
  },"117": {
    "doc": "Richter",
    "title": "Скомпилировать один Program.cs в .exe",
    "content": "(Building Types into a Module) . csc.exe Program.cs (Выполнить в папке, где есть Program.cs) Нужно использовать в файле using System; вместо использования на компиляции /r:MSCorLib.dll /out:Program.exe /t:exe задавать вручную не нужно, это значения по умолчанию или задать параметры явно: csc.exe /out:Program.exe /t:exe /r:MSCorLib.dll Program.cs . ",
    "url": "/pages/dotnet/richter/richter.html#%D1%81%D0%BA%D0%BE%D0%BC%D0%BF%D0%B8%D0%BB%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D1%82%D1%8C-%D0%BE%D0%B4%D0%B8%D0%BD-programcs-%D0%B2-exe",
    "relUrl": "/pages/dotnet/richter/richter.html#скомпилировать-один-programcs-в-exe"
  },"118": {
    "doc": "Richter",
    "title": "Ildasm",
    "content": "ILDasm Program.exe в папке с Program.exe Ctrl+M посмотреть метадату View/Statistics посмотреть статистику . Что такое CLR-assembly: To summarize, an assembly is a unit of reuse, versioning, and security. It allows you to partition your types and resources into separate files so that you, and consumers of your assembly, get to determine which files to package together and deploy. After the CLR loads the file containing the manifest, it can determine which of the assembly’s other files contain the types and resources the application is referencing. Anyone consuming the assembly is required to know only the name of the file containing the manifest; the file partitioning is then abstracted away from the consumer and can change in the future without breaking the application’s behavior. If you have multiple types that can share a single version number and security settings, it is recommended that you place all of the types in a single file rather than spread the types out over separate files, let alone separate assemblies. The reason is performance. Loading a file/assembly takes the CLR and Windows time to find the assembly, load it, and initialize it. The fewer files/assemblies loaded the better, because loading fewer assemblies helps reduce working set and also reduces fragmentation of a process’s address space. Finally, NGen.exe can perform better optimizations when processing larger files. ",
    "url": "/pages/dotnet/richter/richter.html#ildasm",
    "relUrl": "/pages/dotnet/richter/richter.html#ildasm"
  },"119": {
    "doc": "Richter",
    "title": "Скомпилировать один Program.cs в .dll",
    "content": "В папке с FUT.cs и RUT.cs csc /out:MultiFileLibrary.dll /t:library /addmodule:RUT.netmodule FUT.cs . ",
    "url": "/pages/dotnet/richter/richter.html#%D1%81%D0%BA%D0%BE%D0%BC%D0%BF%D0%B8%D0%BB%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D1%82%D1%8C-%D0%BE%D0%B4%D0%B8%D0%BD-programcs-%D0%B2-dll",
    "relUrl": "/pages/dotnet/richter/richter.html#скомпилировать-один-programcs-в-dll"
  },"120": {
    "doc": "Richter",
    "title": "Strongly named &amp; weakly named assemblies",
    "content": " ",
    "url": "/pages/dotnet/richter/richter.html#strongly-named--weakly-named-assemblies",
    "relUrl": "/pages/dotnet/richter/richter.html#strongly-named--weakly-named-assemblies"
  },"121": {
    "doc": "Richter",
    "title": "Public Assembly Key",
    "content": " ",
    "url": "/pages/dotnet/richter/richter.html#public-assembly-key",
    "relUrl": "/pages/dotnet/richter/richter.html#public-assembly-key"
  },"122": {
    "doc": "Richter",
    "title": "GAC",
    "content": "Обычно находится в %SystemRoot%\\Microsoft.NET\\Assembly GACUtil.exe для того чтобы добавлять в GAC сборки. Руками не добавлять! В GAC устанавливаются только strongly named сборки . ",
    "url": "/pages/dotnet/richter/richter.html#gac",
    "relUrl": "/pages/dotnet/richter/richter.html#gac"
  },"123": {
    "doc": "Richter",
    "title": "Delay signing",
    "content": " ",
    "url": "/pages/dotnet/richter/richter.html#delay-signing",
    "relUrl": "/pages/dotnet/richter/richter.html#delay-signing"
  },"124": {
    "doc": "Richter",
    "title": "Types",
    "content": "class Employee {...} идентично class Employee : System.Object {...} Все типы наследуют от System.Object, поэтому у все есть методы: Public: Equals, GetHashCode, ToString, GetType Protected: MemberwiseClone, Finalize . ",
    "url": "/pages/dotnet/richter/richter.html#types",
    "relUrl": "/pages/dotnet/richter/richter.html#types"
  },"125": {
    "doc": "Richter",
    "title": "Оператор new",
    "content": ". | Вычисляет количество байт для всех филдов, которые будут в экземпляре | Аллоцирует память, присваивает нули | Инициализирует type object pointer объекта и sync block index members | Вызывает конструктора | . ",
    "url": "/pages/dotnet/richter/richter.html#%D0%BE%D0%BF%D0%B5%D1%80%D0%B0%D1%82%D0%BE%D1%80-new",
    "relUrl": "/pages/dotnet/richter/richter.html#оператор-new"
  },"126": {
    "doc": "Richter",
    "title": "Casting через cast expression ака скобки",
    "content": ". | Object o = new Employee(); Ок | Employee e = (Employee) o; Ок | internal class Employee internal class Manager : Employee ... Object o = new DateTime(); Empoyee e = (Employee) o; . Не Ок . | . ",
    "url": "/pages/dotnet/richter/richter.html#casting-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-cast-expression-%D0%B0%D0%BA%D0%B0-%D1%81%D0%BA%D0%BE%D0%B1%D0%BA%D0%B8",
    "relUrl": "/pages/dotnet/richter/richter.html#casting-через-cast-expression-ака-скобки"
  },"127": {
    "doc": "Richter",
    "title": "Операторы через is и as",
    "content": "is возвращает true если типы совместимы Всегда null для false . as присваивает ссылку на объект или null если типы несовместимы . Employee e = o as Employee; if (e != null) { // Use e within the 'if' statement. } . Разница с кастом скобками в том, что при as тип проверяется один раз. ",
    "url": "/pages/dotnet/richter/richter.html#%D0%BE%D0%BF%D0%B5%D1%80%D0%B0%D1%82%D0%BE%D1%80%D1%8B-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-is-%D0%B8-as",
    "relUrl": "/pages/dotnet/richter/richter.html#операторы-через-is-и-as"
  },"128": {
    "doc": "Richter",
    "title": "Compile time error (CTE) vs Run Time Error (RTE)",
    "content": "Страница 123 . ",
    "url": "/pages/dotnet/richter/richter.html#compile-time-error-cte-vs-run-time-error-rte",
    "relUrl": "/pages/dotnet/richter/richter.html#compile-time-error-cte-vs-run-time-error-rte"
  },"129": {
    "doc": "Richter",
    "title": "Run time 127",
    "content": ". | В процессе много? тредов. | Метод ?= тред | Стек идет от high memory address к low memory address | У всех кроме самых простых методов есть prologue code и epilogue code. Стр. 103 . | Создается один процесс. В него загружается CLR. | Для каждого треда аллоцируется 1-MB стек (thread stack). | Этот стек и будет использоваться для передачи аргументов к методу и для хранения локальных переменных | Когда метод начинает выполняться, пролог-код метода аллоцирует память для для локальных переменных метода | . ",
    "url": "/pages/dotnet/richter/richter.html#run-time-127",
    "relUrl": "/pages/dotnet/richter/richter.html#run-time-127"
  },"130": {
    "doc": "Richter",
    "title": "Richter",
    "content": " ",
    "url": "/pages/dotnet/richter/richter.html",
    "relUrl": "/pages/dotnet/richter/richter.html"
  }
}
